<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Tmap version 3 | CASA0005 Geographic Information Systems and Science</title>
  <meta name="description" content="The CASA0005 Geographic Information Systems and Science practical book" />
  <meta name="generator" content="bookdown 0.42 and GitBook 2.6.7" />

  <meta property="og:title" content="Tmap version 3 | CASA0005 Geographic Information Systems and Science" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="https://andrewmaclachlan.github.io/CASA0005repo//general_images/casa_logo.png" />
  <meta property="og:description" content="The CASA0005 Geographic Information Systems and Science practical book" />
  <meta name="github-repo" content="andrewmaclachlan/CASA0005repo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Tmap version 3 | CASA0005 Geographic Information Systems and Science" />
  
  <meta name="twitter:description" content="The CASA0005 Geographic Information Systems and Science practical book" />
  <meta name="twitter:image" content="https://andrewmaclachlan.github.io/CASA0005repo//general_images/casa_logo.png" />

<meta name="author" content="Andy MacLachlan, Adam Dennett and Claire Dooley" />


<meta name="date" content="2025-08-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="apple-touch-icon-precomposed" sizes="120x120" href="assets/apple-touch-icon.png" />
  <link rel="shortcut icon" href="assets/favicon.ico" type="image/x-icon" />
<link rel="prev" href="qgis-maps.html"/>
<link rel="next" href="functions-1.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<link href="libs/font-awesome-6.5.2/css/all.min.css" rel="stylesheet" />
<link href="libs/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet" />
<link href="libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="libs/datatables-css-0.0.0/datatables-crosstalk.css" rel="stylesheet" />
<script src="libs/datatables-binding-0.33/datatables.js"></script>
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.min.css" rel="stylesheet" />
<link href="libs/dt-core-1.13.6/css/jquery.dataTables.extra.css" rel="stylesheet" />
<script src="libs/dt-core-1.13.6/js/jquery.dataTables.min.js"></script>
<link href="libs/nouislider-7.0.10/jquery.nouislider.min.css" rel="stylesheet" />
<script src="libs/nouislider-7.0.10/jquery.nouislider.min.js"></script>
<link href="libs/selectize-0.12.0/selectize.bootstrap3.css" rel="stylesheet" />
<script src="libs/selectize-0.12.0/selectize.min.js"></script>
<link href="libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet" />
<script src="libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
<script src="libs/plotly-binding-4.10.4/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.2.2/leaflet.js"></script>
<script src="libs/leaflet-providers-2.0.0/leaflet-providers_2.0.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.2.2/leaflet-providers-plugin.js"></script>
<script src="libs/logodeps-1.0.0/logo.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-151934476-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-151934476-1');
</script>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-7M7GJR768X"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7M7GJR768X');
</script>
<script src="assets/book.js"></script>

<script>
/* ========================================================================
 * Bootstrap: transition.js v3.3.7
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);
</script>
<script>
/* ========================================================================
 * Bootstrap: collapse.js v3.3.7
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */

/* jshint latedef: false */

+function ($) {
  'use strict';

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $('[data-toggle="collapse"][href="#' + element.id + '"],' +
                           '[data-toggle="collapse"][data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.7'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.children('.panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && /show|hide/.test(option)) options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $this.data()

    Plugin.call($target, option)
  })

}(jQuery);
</script>
<script>
window.initializeCodeFolding = function(show) {

  // handlers for show-all and hide all
  $("#rmd-show-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('show');
    });
  });
  $("#rmd-hide-all-code").click(function() {
    // close the dropdown menu when an option is clicked
    $("#allCodeButton").dropdown("toggle");
    $('div.r-code-collapse').each(function() {
      $(this).collapse('hide');
    });
  });

  // index for unique code element ids
  var currentIndex = 1;

  // select all R code blocks
  var rCodeBlocks = $('pre.sourceCode, pre.r, pre.python, pre.bash, pre.sql, pre.cpp, pre.stan');
  rCodeBlocks.each(function() {

    // if code block has been labeled with class `fold-show`, show the code on init!
    var classList = $(this).attr('class').split(/\s+/);
    for (var i = 0; i < classList.length; i++) {
    if (classList[i] === 'fold-show') {
        show = true;
      }
    }

    // create a collapsable div to wrap the code in
    var div = $('<div class="collapse r-code-collapse"></div>');
    if (show)
      div.addClass('in');
    var id = 'rcode-643E0F36' + currentIndex++;
    div.attr('id', id);
    $(this).before(div);
    $(this).detach().appendTo(div);

    // add a show code button right above
    var showCodeText = $('<span>' + (show ? 'Hide' : 'Code') + '</span>');
    var showCodeButton = $('<button type="button" class="btn btn-default btn-xs code-folding-btn pull-right"></button>');
    showCodeButton.append(showCodeText);
    showCodeButton
        .attr('data-toggle', 'collapse')
        .attr('data-target', '#' + id)
        .attr('aria-expanded', show)
        .attr('aria-controls', id);

    var buttonRow = $('<div class="row"></div>');
    var buttonCol = $('<div class="col-md-12"></div>');

    buttonCol.append(showCodeButton);
    buttonRow.append(buttonCol);

    div.before(buttonRow);

    // hack: return show to false, otherwise all next codeBlocks will be shown!
    show = false;

    // update state of button on show/hide
    div.on('hidden.bs.collapse', function () {
      showCodeText.text('Code');
    });
    div.on('show.bs.collapse', function () {
      showCodeText.text('Hide');
    });
  });

}
</script>
<script>
/* ========================================================================
 * Bootstrap: dropdown.js v3.3.7
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2016 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  'use strict';

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.7'

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      if (e && e.type == 'click' && /input|textarea/i.test(e.target.tagName) && $.contains($parent[0], e.target)) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger($.Event('hidden.bs.dropdown', relatedTarget))
    })
  }

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $(document.createElement('div'))
          .addClass('dropdown-backdrop')
          .insertAfter($(this))
          .on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger($.Event('shown.bs.dropdown', relatedTarget))
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if (!isActive && e.which != 27 || isActive && e.which == 27) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.disabled):visible a'
    var $items = $parent.find('.dropdown-menu' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--         // up
    if (e.which == 40 && index < $items.length - 1) index++         // down
    if (!~index)                                    index = 0

    $items.eq(index).trigger('focus')
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '.dropdown-menu', Dropdown.prototype.keydown)

}(jQuery);
</script>
<style type="text/css">
.code-folding-btn {
  margin-bottom: 4px;
}

.row { display: flex; }
.collapse { display: none; }
.in { display:block }
.pull-right > .dropdown-menu {
    right: 0;
    left: auto;
}

.dropdown-menu {
    position: absolute;
    top: 100%;
    left: 0;
    z-index: 1000;
    display: none;
    float: left;
    min-width: 160px;
    padding: 5px 0;
    margin: 2px 0 0;
    font-size: 14px;
    text-align: left;
    list-style: none;
    background-color: #fff;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    border: 1px solid #ccc;
    border: 1px solid rgba(0,0,0,.15);
    border-radius: 4px;
    -webkit-box-shadow: 0 6px 12px rgba(0,0,0,.175);
    box-shadow: 0 6px 12px rgba(0,0,0,.175);
}

.open > .dropdown-menu {
    display: block;
    color: #ffffff;
    background-color: #ffffff;
    background-image: none;
    border-color: #92897e;
}

.dropdown-menu > li > a {
  display: block;
  padding: 3px 20px;
  clear: both;
  font-weight: 400;
  line-height: 1.42857143;
  color: #000000;
  white-space: nowrap;
}

.dropdown-menu > li > a:hover,
.dropdown-menu > li > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
}

.dropdown-menu > .active > a,
.dropdown-menu > .active > a:hover,
.dropdown-menu > .active > a:focus {
  color: #ffffff;
  text-decoration: none;
  background-color: #e95420;
  outline: 0;
}
.dropdown-menu > .disabled > a,
.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  color: #aea79f;
}

.dropdown-menu > .disabled > a:hover,
.dropdown-menu > .disabled > a:focus {
  text-decoration: none;
  cursor: not-allowed;
  background-color: transparent;
  background-image: none;
  filter: progid:DXImageTransform.Microsoft.gradient(enabled = false);
}

.btn {
  display: inline-block;
  margin-bottom: 1;
  font-weight: normal;
  text-align: center;
  white-space: nowrap;
  vertical-align: middle;
  -ms-touch-action: manipulation;
      touch-action: manipulation;
  cursor: pointer;
  background-image: none;
  border: 1px solid transparent;
  padding: 4px 8px;
  font-size: 14px;
  line-height: 1.42857143;
  border-radius: 4px;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
  outline: 5px auto -webkit-focus-ring-color;
  outline-offset: -2px;
}
.btn:hover,
.btn:focus,
.btn.focus {
  color: #ffffff;
  text-decoration: none;
}
.btn:active,
.btn.active {
  background-image: none;
  outline: 0;
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
  cursor: not-allowed;
  filter: alpha(opacity=65);
  opacity: 0.65;
  box-shadow: none;
}
a.btn.disabled,
fieldset[disabled] a.btn {
  pointer-events: none;
}
.btn-default {
  color: #ffffff;
  background-color: #aea79f; #important
  border-color: #aea79f;
}

.btn-default:focus,
.btn-default.focus {
  color: #ffffff;
  background-color: #978e83;
  border-color: #6f675e;
}

.btn-default:hover {
  color: #ffffff;
  background-color: #978e83;
  border-color: #92897e;
}
.btn-default:active,
.btn-default.active,
.btn-group > .btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
  border-radius: 0;
}
.btn-group > .btn:first-child {
  margin-left: 0;
}
.btn-group > .btn:first-child:not(:last-child):not(.dropdown-toggle) {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn:last-child:not(:first-child),
.btn-group > .dropdown-toggle:not(:first-child) {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group:not(:first-child):not(:last-child) > .btn {
  border-radius: 0;
}
.btn-group > .btn-group:first-child:not(:last-child) > .btn:last-child,
.btn-group > .btn-group:first-child:not(:last-child) > .dropdown-toggle {
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.btn-group > .btn-group:last-child:not(:first-child) > .btn:first-child {
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
}
.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
  outline: 0;
}
.btn-group > .btn + .dropdown-toggle {
  padding-right: 8px;
  padding-left: 8px;
}
.btn-group > .btn-lg + .dropdown-toggle {
  padding-right: 12px;
  padding-left: 12px;
}
.btn-group.open .dropdown-toggle {
  box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}
.btn-group.open .dropdown-toggle.btn-link {
  box-shadow: none;
}

</style>
<script>
var str = '<div class="btn-group pull-right" style="position: fixed; right: 50px; top: 10px; z-index: 200"><button type="button" class="btn btn-default btn-xs dropdown-toggle" id="allCodeButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-_extension-text-contrast=""><span>Code</span> <span class="caret"></span></button><ul class="dropdown-menu" style="min-width: 50px;"><li><a id="rmd-show-all-code" href="#">Show All Code</a></li><li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li></ul></div>';
document.write(str);
</script>
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "hide");
});
</script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="assets/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="toc-logo"><a href="https://www.ucl.ac.uk/module-catalogue/modules/geographic-information-systems-and-science-CASA0005"><img src="general_images/casa_logo.jpg"></a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgement"><i class="fa fa-check"></i>Acknowledgement</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#citation"><i class="fa fa-check"></i>Citation</a></li>
</ul></li>
<li class="part"><span><b>Course information</b></span></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html"><i class="fa fa-check"></i>Hello GIS</a>
<ul>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#intended-course-learning-outcomes"><i class="fa fa-check"></i>Intended course learning outcomes</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#how-to-use-this-book"><i class="fa fa-check"></i>How to use this book</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#getting-started"><i class="fa fa-check"></i>Getting started</a></li>
<li class="chapter" data-level="" data-path="hello-gis.html"><a href="hello-gis.html#self-guided-learning"><i class="fa fa-check"></i>Self guided learning</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html"><i class="fa fa-check"></i>Software installation</a>
<ul>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#qgis"><i class="fa fa-check"></i>QGIS</a></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#r"><i class="fa fa-check"></i>R</a>
<ul>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#basics"><i class="fa fa-check"></i>Basics</a></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#packages"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="software-installation.html"><a href="software-installation.html#arcgis"><i class="fa fa-check"></i>ArcGIS</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html"><i class="fa fa-check"></i>External usage</a>
<ul>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#how-to-adopt-this-course"><i class="fa fa-check"></i>How to adopt this course</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#how-to-contribute"><i class="fa fa-check"></i>How to contribute</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#supporting-the-module"><i class="fa fa-check"></i>Supporting the module</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#license"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#updates"><i class="fa fa-check"></i>Updates</a></li>
<li class="chapter" data-level="" data-path="external-usage.html"><a href="external-usage.html#packages-1"><i class="fa fa-check"></i>Packages</a></li>
</ul></li>
<li class="part"><span><b>I GIS tools</b></span></li>
<li class="chapter" data-level="1" data-path="geographic-information.html"><a href="geographic-information.html"><i class="fa fa-check"></i><b>1</b> Geographic Information</a>
<ul>
<li class="chapter" data-level="1.1" data-path="geographic-information.html"><a href="geographic-information.html#learning-outcomes"><i class="fa fa-check"></i><b>1.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="1.2" data-path="geographic-information.html"><a href="geographic-information.html#homework"><i class="fa fa-check"></i><b>1.2</b> Homework</a></li>
<li class="chapter" data-level="1.3" data-path="geographic-information.html"><a href="geographic-information.html#recommended-listening"><i class="fa fa-check"></i><b>1.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="1.4" data-path="geographic-information.html"><a href="geographic-information.html#the-basics-of-geographic-information"><i class="fa fa-check"></i><b>1.4</b> The Basics of Geographic Information</a>
<ul>
<li class="chapter" data-level="1.4.1" data-path="geographic-information.html"><a href="geographic-information.html#data-types-in-statistics"><i class="fa fa-check"></i><b>1.4.1</b> Data types in statistics</a></li>
<li class="chapter" data-level="1.4.2" data-path="geographic-information.html"><a href="geographic-information.html#important-gis-data-formats"><i class="fa fa-check"></i><b>1.4.2</b> Important GIS data formats</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="geographic-information.html"><a href="geographic-information.html#general-data-flow"><i class="fa fa-check"></i><b>1.5</b> General data flow</a></li>
<li class="chapter" data-level="1.6" data-path="geographic-information.html"><a href="geographic-information.html#data"><i class="fa fa-check"></i><b>1.6</b> Data</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="geographic-information.html"><a href="geographic-information.html#file-paths"><i class="fa fa-check"></i><b>1.6.1</b> File paths</a></li>
<li class="chapter" data-level="1.6.2" data-path="geographic-information.html"><a href="geographic-information.html#data-download"><i class="fa fa-check"></i><b>1.6.2</b> Data download</a></li>
<li class="chapter" data-level="1.6.3" data-path="geographic-information.html"><a href="geographic-information.html#data-pre-processing"><i class="fa fa-check"></i><b>1.6.3</b> Data pre-processing</a></li>
<li class="chapter" data-level="1.6.4" data-path="geographic-information.html"><a href="geographic-information.html#qgis-1"><i class="fa fa-check"></i><b>1.6.4</b> QGIS</a></li>
<li class="chapter" data-level="1.6.5" data-path="geographic-information.html"><a href="geographic-information.html#r-1"><i class="fa fa-check"></i><b>1.6.5</b> R</a></li>
<li class="chapter" data-level="1.6.6" data-path="geographic-information.html"><a href="geographic-information.html#export-data-1"><i class="fa fa-check"></i><b>1.6.6</b> Export data</a></li>
<li class="chapter" data-level="1.6.7" data-path="geographic-information.html"><a href="geographic-information.html#what-will-i-use-1"><i class="fa fa-check"></i><b>1.6.7</b> What will I use</a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="geographic-information.html"><a href="geographic-information.html#data-sources-and-task"><i class="fa fa-check"></i><b>1.7</b> Data sources and task</a>
<ul>
<li class="chapter" data-level="1.7.1" data-path="geographic-information.html"><a href="geographic-information.html#uk-data-service"><i class="fa fa-check"></i><b>1.7.1</b> UK Data Service</a></li>
<li class="chapter" data-level="1.7.2" data-path="geographic-information.html"><a href="geographic-information.html#ons"><i class="fa fa-check"></i><b>1.7.2</b> ONS</a></li>
<li class="chapter" data-level="1.7.3" data-path="geographic-information.html"><a href="geographic-information.html#nomis"><i class="fa fa-check"></i><b>1.7.3</b> nomis</a></li>
<li class="chapter" data-level="1.7.4" data-path="geographic-information.html"><a href="geographic-information.html#os"><i class="fa fa-check"></i><b>1.7.4</b> OS</a></li>
<li class="chapter" data-level="1.7.5" data-path="geographic-information.html"><a href="geographic-information.html#edina-digimap"><i class="fa fa-check"></i><b>1.7.5</b> Edina Digimap</a></li>
<li class="chapter" data-level="1.7.6" data-path="geographic-information.html"><a href="geographic-information.html#osm"><i class="fa fa-check"></i><b>1.7.6</b> OSM</a></li>
<li class="chapter" data-level="1.7.7" data-path="geographic-information.html"><a href="geographic-information.html#defra"><i class="fa fa-check"></i><b>1.7.7</b> DEFRA</a></li>
<li class="chapter" data-level="1.7.8" data-path="geographic-information.html"><a href="geographic-information.html#data-lists"><i class="fa fa-check"></i><b>1.7.8</b> Data lists</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="geographic-information.html"><a href="geographic-information.html#summary"><i class="fa fa-check"></i><b>1.8</b> Summary</a></li>
<li class="chapter" data-level="1.9" data-path="geographic-information.html"><a href="geographic-information.html#feedback"><i class="fa fa-check"></i><b>1.9</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introduction-to-r.html"><a href="introduction-to-r.html"><i class="fa fa-check"></i><b>2</b> Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#learning-outcomes-1"><i class="fa fa-check"></i><b>2.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="2.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#homework-1"><i class="fa fa-check"></i><b>2.2</b> Homework</a></li>
<li class="chapter" data-level="2.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#recommended-listening-1"><i class="fa fa-check"></i><b>2.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="2.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#introduction-1"><i class="fa fa-check"></i><b>2.4</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#online-forums-are-your-friend"><i class="fa fa-check"></i><b>2.4.1</b> Online forums are your friend!!</a></li>
<li class="chapter" data-level="2.4.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#health-warning"><i class="fa fa-check"></i><b>2.4.2</b> Health warning</a></li>
<li class="chapter" data-level="2.4.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#r-and-rstudio"><i class="fa fa-check"></i><b>2.4.3</b> R and RStudio</a></li>
<li class="chapter" data-level="2.4.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#getting-started-1"><i class="fa fa-check"></i><b>2.4.4</b> Getting started</a></li>
<li class="chapter" data-level="2.4.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basics-1"><i class="fa fa-check"></i><b>2.4.5</b> Basics</a></li>
<li class="chapter" data-level="2.4.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#scripts-and-some-basic-commands"><i class="fa fa-check"></i><b>2.4.6</b> Scripts and some basic commands</a></li>
<li class="chapter" data-level="2.4.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#functions"><i class="fa fa-check"></i><b>2.4.7</b> Functions</a></li>
<li class="chapter" data-level="2.4.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#basic-plotting"><i class="fa fa-check"></i><b>2.4.8</b> Basic plotting</a></li>
<li class="chapter" data-level="2.4.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#help"><i class="fa fa-check"></i><b>2.4.9</b> Help</a></li>
<li class="chapter" data-level="2.4.10" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-structures"><i class="fa fa-check"></i><b>2.4.10</b> Data structures</a></li>
<li class="chapter" data-level="2.4.11" data-path="introduction-to-r.html"><a href="introduction-to-r.html#elements-of-a-data-frame"><i class="fa fa-check"></i><b>2.4.11</b> Elements of a data frame</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#reading-data-into-r"><i class="fa fa-check"></i><b>2.5</b> Reading data into R</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="introduction-to-r.html"><a href="introduction-to-r.html#old-skool-cleaning"><i class="fa fa-check"></i><b>2.5.1</b> Old skool cleaning</a></li>
<li class="chapter" data-level="2.5.2" data-path="introduction-to-r.html"><a href="introduction-to-r.html#here"><i class="fa fa-check"></i><b>2.5.2</b> Here</a></li>
<li class="chapter" data-level="2.5.3" data-path="introduction-to-r.html"><a href="introduction-to-r.html#new-skool-cleaning"><i class="fa fa-check"></i><b>2.5.3</b> New skool cleaning</a></li>
<li class="chapter" data-level="2.5.4" data-path="introduction-to-r.html"><a href="introduction-to-r.html#examining-your-new-data"><i class="fa fa-check"></i><b>2.5.4</b> Examining your new data</a></li>
<li class="chapter" data-level="2.5.5" data-path="introduction-to-r.html"><a href="introduction-to-r.html#data-manipulation-in-r"><i class="fa fa-check"></i><b>2.5.5</b> Data manipulation in R</a></li>
<li class="chapter" data-level="2.5.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#plotting"><i class="fa fa-check"></i><b>2.5.6</b> Plotting</a></li>
<li class="chapter" data-level="2.5.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#pimp-my-graph"><i class="fa fa-check"></i><b>2.5.7</b> Pimp my graph!</a></li>
<li class="chapter" data-level="2.5.8" data-path="introduction-to-r.html"><a href="introduction-to-r.html#spatial-data-in-r"><i class="fa fa-check"></i><b>2.5.8</b> Spatial Data in R</a></li>
<li class="chapter" data-level="2.5.9" data-path="introduction-to-r.html"><a href="introduction-to-r.html#simple-mapping"><i class="fa fa-check"></i><b>2.5.9</b> Simple mapping</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="introduction-to-r.html"><a href="introduction-to-r.html#tidying-data"><i class="fa fa-check"></i><b>2.6</b> Tidying data</a></li>
<li class="chapter" data-level="2.7" data-path="introduction-to-r.html"><a href="introduction-to-r.html#feedback-1"><i class="fa fa-check"></i><b>2.7</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html"><i class="fa fa-check"></i><b>3</b> Spatial descriptive statistics</a>
<ul>
<li class="chapter" data-level="3.1" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#learning-outcomes-2"><i class="fa fa-check"></i><b>3.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="3.2" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#homework-2"><i class="fa fa-check"></i><b>3.2</b> Homework</a></li>
<li class="chapter" data-level="3.3" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#recommended-listening-2"><i class="fa fa-check"></i><b>3.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="3.4" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#introduction-2"><i class="fa fa-check"></i><b>3.4</b> Introduction</a></li>
<li class="chapter" data-level="3.5" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#part-1-projections"><i class="fa fa-check"></i><b>3.5</b> Part 1 projections</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#changing-projections"><i class="fa fa-check"></i><b>3.5.1</b> Changing projections</a></li>
<li class="chapter" data-level="3.5.2" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#worldclim-data"><i class="fa fa-check"></i><b>3.5.2</b> WorldClim data</a></li>
<li class="chapter" data-level="3.5.3" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#data-loading"><i class="fa fa-check"></i><b>3.5.3</b> Data loading</a></li>
<li class="chapter" data-level="3.5.4" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#raster-location"><i class="fa fa-check"></i><b>3.5.4</b> Raster location</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#part-2-descriptive-statistics"><i class="fa fa-check"></i><b>3.6</b> Part 2 descriptive statistics</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#data-preparation"><i class="fa fa-check"></i><b>3.6.1</b> Data preparation</a></li>
<li class="chapter" data-level="3.6.2" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#histogram"><i class="fa fa-check"></i><b>3.6.2</b> Histogram</a></li>
<li class="chapter" data-level="3.6.3" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#using-more-data"><i class="fa fa-check"></i><b>3.6.3</b> Using more data</a></li>
<li class="chapter" data-level="3.6.4" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#histogram-with-ggplot"><i class="fa fa-check"></i><b>3.6.4</b> Histogram with ggplot</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="spatial-descriptive-statistics.html"><a href="spatial-descriptive-statistics.html#feedback-2"><i class="fa fa-check"></i><b>3.7</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html"><i class="fa fa-check"></i><b>4</b> Git, GitHub and RMarkdown</a>
<ul>
<li class="chapter" data-level="4.1" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#learning-outcomes-3"><i class="fa fa-check"></i><b>4.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="4.2" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#homework-3"><i class="fa fa-check"></i><b>4.2</b> Homework</a></li>
<li class="chapter" data-level="4.3" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#recommended-listening-3"><i class="fa fa-check"></i><b>4.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="4.4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#introduction-3"><i class="fa fa-check"></i><b>4.4</b> Introduction</a></li>
<li class="chapter" data-level="4.5" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#git-and-github"><i class="fa fa-check"></i><b>4.5</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="4.5.1" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#the-three-ways"><i class="fa fa-check"></i><b>4.5.1</b> The three ways</a></li>
<li class="chapter" data-level="4.5.2" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#set-up-your-github"><i class="fa fa-check"></i><b>4.5.2</b> Set up your GitHub</a></li>
<li class="chapter" data-level="4.5.3" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#using-rstudio-with-git"><i class="fa fa-check"></i><b>4.5.3</b> Using RStudio with Git</a></li>
<li class="chapter" data-level="4.5.4" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#using-the-git-gui---way-1"><i class="fa fa-check"></i><b>4.5.4</b> Using the Git GUI - way 1</a></li>
<li class="chapter" data-level="4.5.5" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#create-a-new-version-control-in-rstudio---way-2"><i class="fa fa-check"></i><b>4.5.5</b> Create a new version control in RStudio - way 2</a></li>
<li class="chapter" data-level="4.5.6" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#if-have-an-existing-project---way-3"><i class="fa fa-check"></i><b>4.5.6</b> If have an existing project - way 3</a></li>
<li class="chapter" data-level="4.5.7" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#commiting-to-git"><i class="fa fa-check"></i><b>4.5.7</b> Commiting to Git</a></li>
<li class="chapter" data-level="4.5.8" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#push-to-github"><i class="fa fa-check"></i><b>4.5.8</b> Push to Github</a></li>
<li class="chapter" data-level="4.5.9" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#pull-from-github"><i class="fa fa-check"></i><b>4.5.9</b> Pull from GitHub</a></li>
<li class="chapter" data-level="4.5.10" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#using-git-outside-rstudio"><i class="fa fa-check"></i><b>4.5.10</b> Using Git outside RStudio</a></li>
<li class="chapter" data-level="4.5.11" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#troubleshooting"><i class="fa fa-check"></i><b>4.5.11</b> Troubleshooting</a></li>
<li class="chapter" data-level="4.5.12" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#fork-a-repository"><i class="fa fa-check"></i><b>4.5.12</b> Fork a repository</a></li>
<li class="chapter" data-level="4.5.13" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#branches"><i class="fa fa-check"></i><b>4.5.13</b> Branches</a></li>
<li class="chapter" data-level="4.5.14" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#health-warning-1"><i class="fa fa-check"></i><b>4.5.14</b> Health warning</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#rmarkdown"><i class="fa fa-check"></i><b>4.6</b> RMarkdown</a>
<ul>
<li class="chapter" data-level="4.6.1" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#html"><i class="fa fa-check"></i><b>4.6.1</b> HTML</a></li>
<li class="chapter" data-level="4.6.2" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#knit-options"><i class="fa fa-check"></i><b>4.6.2</b> Knit options</a></li>
<li class="chapter" data-level="4.6.3" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#shortcuts"><i class="fa fa-check"></i><b>4.6.3</b> Shortcuts</a></li>
</ul></li>
<li class="chapter" data-level="4.7" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#further-reading"><i class="fa fa-check"></i><b>4.7</b> Further reading</a></li>
<li class="chapter" data-level="4.8" data-path="git-github-and-rmarkdown.html"><a href="git-github-and-rmarkdown.html#feedback-3"><i class="fa fa-check"></i><b>4.8</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="map-making.html"><a href="map-making.html"><i class="fa fa-check"></i><b>5</b> Map making</a>
<ul>
<li class="chapter" data-level="5.1" data-path="map-making.html"><a href="map-making.html#learning-outcomes-4"><i class="fa fa-check"></i><b>5.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="5.2" data-path="map-making.html"><a href="map-making.html#homework-4"><i class="fa fa-check"></i><b>5.2</b> Homework</a></li>
<li class="chapter" data-level="5.3" data-path="map-making.html"><a href="map-making.html#recommended-listening-4"><i class="fa fa-check"></i><b>5.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="5.4" data-path="map-making.html"><a href="map-making.html#introduction-4"><i class="fa fa-check"></i><b>5.4</b> Introduction</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="map-making.html"><a href="map-making.html#osm-1"><i class="fa fa-check"></i><b>5.4.1</b> OSM</a></li>
<li class="chapter" data-level="5.4.2" data-path="map-making.html"><a href="map-making.html#airbnb"><i class="fa fa-check"></i><b>5.4.2</b> Airbnb</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="map-making.html"><a href="map-making.html#data-1"><i class="fa fa-check"></i><b>5.5</b> Data</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="map-making.html"><a href="map-making.html#osm-2"><i class="fa fa-check"></i><b>5.5.1</b> OSM</a></li>
<li class="chapter" data-level="5.5.2" data-path="map-making.html"><a href="map-making.html#london-boroughs"><i class="fa fa-check"></i><b>5.5.2</b> London boroughs</a></li>
<li class="chapter" data-level="5.5.3" data-path="map-making.html"><a href="map-making.html#world-cities"><i class="fa fa-check"></i><b>5.5.3</b> World cities</a></li>
<li class="chapter" data-level="5.5.4" data-path="map-making.html"><a href="map-making.html#uk-outline"><i class="fa fa-check"></i><b>5.5.4</b> Uk outline</a></li>
<li class="chapter" data-level="5.5.5" data-path="map-making.html"><a href="map-making.html#airbnb-1"><i class="fa fa-check"></i><b>5.5.5</b> Airbnb</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="map-making.html"><a href="map-making.html#plan"><i class="fa fa-check"></i><b>5.6</b> Plan</a></li>
<li class="chapter" data-level="5.7" data-path="map-making.html"><a href="map-making.html#crs-and-filter"><i class="fa fa-check"></i><b>5.7</b> CRS and filter</a></li>
<li class="chapter" data-level="5.8" data-path="map-making.html"><a href="map-making.html#join-and-sum"><i class="fa fa-check"></i><b>5.8</b> Join and sum</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="map-making.html"><a href="map-making.html#key-advice"><i class="fa fa-check"></i><b>5.8.1</b> Key advice</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="map-making.html"><a href="map-making.html#mapping"><i class="fa fa-check"></i><b>5.9</b> Mapping</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="map-making.html"><a href="map-making.html#tmap-syntax"><i class="fa fa-check"></i><b>5.9.1</b> tmap syntax</a></li>
<li class="chapter" data-level="5.9.2" data-path="map-making.html"><a href="map-making.html#complete-map"><i class="fa fa-check"></i><b>5.9.2</b> Complete map</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="map-making.html"><a href="map-making.html#bad-maps"><i class="fa fa-check"></i><b>5.10</b> Bad maps</a></li>
<li class="chapter" data-level="5.11" data-path="map-making.html"><a href="map-making.html#feedback-4"><i class="fa fa-check"></i><b>5.11</b> Feedback</a></li>
</ul></li>
<li class="part"><span><b>II GIS analysis</b></span></li>
<li class="chapter" data-level="6" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html"><i class="fa fa-check"></i><b>6</b> Detecting spatial patterns</a>
<ul>
<li class="chapter" data-level="6.1" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#learning-outcomes-5"><i class="fa fa-check"></i><b>6.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="6.2" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#homework-5"><i class="fa fa-check"></i><b>6.2</b> Homework</a></li>
<li class="chapter" data-level="6.3" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#recommended-listening-5"><i class="fa fa-check"></i><b>6.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="6.4" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#introduction-5"><i class="fa fa-check"></i><b>6.4</b> Introduction</a></li>
<li class="chapter" data-level="6.5" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#setting-up-your-data"><i class="fa fa-check"></i><b>6.5</b> Setting up your data</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#data-cleaning"><i class="fa fa-check"></i><b>6.5.1</b> Data cleaning</a></li>
<li class="chapter" data-level="6.5.2" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#spatial-subsetting"><i class="fa fa-check"></i><b>6.5.2</b> Spatial subsetting</a></li>
<li class="chapter" data-level="6.5.3" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#spatial-clipping"><i class="fa fa-check"></i><b>6.5.3</b> Spatial clipping</a></li>
<li class="chapter" data-level="6.5.4" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#key-advice-1"><i class="fa fa-check"></i><b>6.5.4</b> Key advice</a></li>
<li class="chapter" data-level="6.5.5" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#study-area-1"><i class="fa fa-check"></i><b>6.5.5</b> Study area</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#point-pattern-analysis"><i class="fa fa-check"></i><b>6.6</b> Point pattern analysis</a>
<ul>
<li class="chapter" data-level="6.6.1" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#kernel-density-estimation"><i class="fa fa-check"></i><b>6.6.1</b> Kernel Density Estimation</a></li>
<li class="chapter" data-level="6.6.2" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#quadrat-analysis"><i class="fa fa-check"></i><b>6.6.2</b> Quadrat Analysis</a></li>
<li class="chapter" data-level="6.6.3" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#try-experimenting"><i class="fa fa-check"></i><b>6.6.3</b> Try experimenting…</a></li>
<li class="chapter" data-level="6.6.4" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#ripleys-k"><i class="fa fa-check"></i><b>6.6.4</b> Ripley’s K</a></li>
<li class="chapter" data-level="6.6.5" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#alternatives-to-ripleys-k"><i class="fa fa-check"></i><b>6.6.5</b> Alternatives to Ripley’s K</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#density-based-spatial-clustering-of-applications-with-noise-dbscan"><i class="fa fa-check"></i><b>6.7</b> Density-based spatial clustering of applications with noise: DBSCAN</a></li>
<li class="chapter" data-level="6.8" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#point-pattern-analysis-summary"><i class="fa fa-check"></i><b>6.8</b> Point pattern analysis summary</a></li>
<li class="chapter" data-level="6.9" data-path="detecting-spatial-patterns.html"><a href="detecting-spatial-patterns.html#feedback-5"><i class="fa fa-check"></i><b>6.9</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html"><i class="fa fa-check"></i><b>7</b> Spatial autocorrelation</a>
<ul>
<li class="chapter" data-level="7.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#learning-outcomes-6"><i class="fa fa-check"></i><b>7.1</b> Learning outcomes</a></li>
<li class="chapter" data-level="7.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#homework-6"><i class="fa fa-check"></i><b>7.2</b> Homework</a></li>
<li class="chapter" data-level="7.3" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#recommended-listening-6"><i class="fa fa-check"></i><b>7.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="7.4" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#introduction-6"><i class="fa fa-check"></i><b>7.4</b> Introduction</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#analysing-spatial-autocorrelation-with-morans-i-lisa-and-friends"><i class="fa fa-check"></i><b>7.4.1</b> Analysing Spatial Autocorrelation with Moran’s I, LISA and friends</a></li>
<li class="chapter" data-level="7.4.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#data-download-1"><i class="fa fa-check"></i><b>7.4.2</b> Data download</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#data-cleaning-1"><i class="fa fa-check"></i><b>7.5</b> Data cleaning</a></li>
<li class="chapter" data-level="7.6" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#data-manipulation"><i class="fa fa-check"></i><b>7.6</b> Data manipulation</a></li>
<li class="chapter" data-level="7.7" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#weight-matrix"><i class="fa fa-check"></i><b>7.7</b> Weight matrix</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#matrix-style"><i class="fa fa-check"></i><b>7.7.1</b> Matrix style</a></li>
</ul></li>
<li class="chapter" data-level="7.8" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#autocorrelation"><i class="fa fa-check"></i><b>7.8</b> Autocorrelation</a>
<ul>
<li class="chapter" data-level="7.8.1" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#morans-i"><i class="fa fa-check"></i><b>7.8.1</b> Moran’s I</a></li>
<li class="chapter" data-level="7.8.2" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#gearys-c"><i class="fa fa-check"></i><b>7.8.2</b> Geary’s C</a></li>
<li class="chapter" data-level="7.8.3" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#getis-ord"><i class="fa fa-check"></i><b>7.8.3</b> Getis Ord</a></li>
<li class="chapter" data-level="7.8.4" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#summary-1"><i class="fa fa-check"></i><b>7.8.4</b> Summary</a></li>
<li class="chapter" data-level="7.8.5" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#local-morans-i"><i class="fa fa-check"></i><b>7.8.5</b> Local Moran’s I</a></li>
<li class="chapter" data-level="7.8.6" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#local-getis-ord-g_i"><i class="fa fa-check"></i><b>7.8.6</b> Local Getis Ord <span class="math inline">\(G_{i}^{*}\)</span></a></li>
<li class="chapter" data-level="7.8.7" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#summary-2"><i class="fa fa-check"></i><b>7.8.7</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="7.9" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#other-variables"><i class="fa fa-check"></i><b>7.9</b> Other variables</a></li>
<li class="chapter" data-level="7.10" data-path="spatial-autocorrelation.html"><a href="spatial-autocorrelation.html#feedback-6"><i class="fa fa-check"></i><b>7.10</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html"><i class="fa fa-check"></i><b>8</b> Explaining spatial patterns</a>
<ul>
<li class="chapter" data-level="8.1" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#learning-objectives"><i class="fa fa-check"></i><b>8.1</b> Learning objectives</a></li>
<li class="chapter" data-level="8.2" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#homework-7"><i class="fa fa-check"></i><b>8.2</b> Homework</a></li>
<li class="chapter" data-level="8.3" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#recommended-listening-7"><i class="fa fa-check"></i><b>8.3</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="8.4" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#introduction-7"><i class="fa fa-check"></i><b>8.4</b> Introduction</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#setting-up-your-data-1"><i class="fa fa-check"></i><b>8.4.1</b> Setting up your Data</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#analysing-gcse-exam-performance---testing-a-research-hypothesis"><i class="fa fa-check"></i><b>8.5</b> Analysing GCSE exam performance - testing a research hypothesis</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#research-question-and-hypothesis"><i class="fa fa-check"></i><b>8.5.1</b> Research Question and Hypothesis</a></li>
<li class="chapter" data-level="8.5.2" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#regression-basics"><i class="fa fa-check"></i><b>8.5.2</b> Regression Basics</a></li>
<li class="chapter" data-level="8.5.3" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#running-a-regression-model-in-r"><i class="fa fa-check"></i><b>8.5.3</b> Running a Regression Model in R</a></li>
<li class="chapter" data-level="8.5.4" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#tidymodels"><i class="fa fa-check"></i><b>8.5.4</b> tidymodels</a></li>
<li class="chapter" data-level="8.5.5" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#bootstrap-resampling"><i class="fa fa-check"></i><b>8.5.5</b> Bootstrap resampling</a></li>
<li class="chapter" data-level="8.5.6" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#variables"><i class="fa fa-check"></i><b>8.5.6</b> Variables</a></li>
<li class="chapter" data-level="8.5.7" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#assumptions-underpinning-linear-regression"><i class="fa fa-check"></i><b>8.5.7</b> Assumptions Underpinning Linear Regression</a></li>
<li class="chapter" data-level="8.5.8" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#assumption-1---there-is-a-linear-relationship-between-the-dependent-and-independent-variables"><i class="fa fa-check"></i><b>8.5.8</b> Assumption 1 - There is a linear relationship between the dependent and independent variables</a></li>
<li class="chapter" data-level="8.5.9" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#assumption-2---the-residuals-in-your-model-should-be-normally-distributed"><i class="fa fa-check"></i><b>8.5.9</b> Assumption 2 - The residuals in your model should be normally distributed</a></li>
<li class="chapter" data-level="8.5.10" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#assumption-3---no-multicolinearity-in-the-independent-variables"><i class="fa fa-check"></i><b>8.5.10</b> Assumption 3 - No Multicolinearity in the independent variables</a></li>
<li class="chapter" data-level="8.5.11" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#assumption-4---homoscedasticity"><i class="fa fa-check"></i><b>8.5.11</b> Assumption 4 - Homoscedasticity</a></li>
<li class="chapter" data-level="8.5.12" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#assumption-5---independence-of-errors"><i class="fa fa-check"></i><b>8.5.12</b> Assumption 5 - Independence of Errors</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#spatial-regression-models"><i class="fa fa-check"></i><b>8.6</b> Spatial Regression Models</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#dealing-with-spatially-autocorrelated-residuals---spatial-lag-and-spatial-error-models"><i class="fa fa-check"></i><b>8.6.1</b> Dealing with Spatially Autocorrelated Residuals - Spatial Lag and Spatial Error models</a></li>
<li class="chapter" data-level="8.6.2" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#key-advice-2"><i class="fa fa-check"></i><b>8.6.2</b> Key advice</a></li>
<li class="chapter" data-level="8.6.3" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#which-model-to-use"><i class="fa fa-check"></i><b>8.6.3</b> Which model to use</a></li>
<li class="chapter" data-level="8.6.4" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#more-data"><i class="fa fa-check"></i><b>8.6.4</b> More data</a></li>
<li class="chapter" data-level="8.6.5" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#extending-your-regression-model---dummy-variables"><i class="fa fa-check"></i><b>8.6.5</b> Extending your regression model - Dummy Variables</a></li>
<li class="chapter" data-level="8.6.6" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#task-investigating-further---adding-more-explanatory-variables-into-a-multiple-regression-model"><i class="fa fa-check"></i><b>8.6.6</b> TASK: Investigating Further - Adding More Explanatory Variables into a multiple regression model</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#task-3---spatial-non-stationarity-and-geographically-weighted-regression-models-gwr"><i class="fa fa-check"></i><b>8.7</b> Task 3 - Spatial Non-stationarity and Geographically Weighted Regression Models (GWR)</a></li>
<li class="chapter" data-level="8.8" data-path="explaining-spatial-patterns.html"><a href="explaining-spatial-patterns.html#feedback-7"><i class="fa fa-check"></i><b>8.8</b> Feedback</a></li>
</ul></li>
<li class="part"><span><b>Extra</b></span></li>
<li class="chapter" data-level="" data-path="multiple-linear-regression.html"><a href="multiple-linear-regression.html"><i class="fa fa-check"></i>Multiple Linear Regression</a></li>
<li class="chapter" data-level="" data-path="module-resources.html"><a href="module-resources.html"><i class="fa fa-check"></i>Module resources</a>
<ul>
<li class="chapter" data-level="8.9" data-path="module-resources.html"><a href="module-resources.html#markscheme"><i class="fa fa-check"></i><b>8.9</b> Markscheme</a></li>
<li class="chapter" data-level="8.10" data-path="module-resources.html"><a href="module-resources.html#old-practicals"><i class="fa fa-check"></i><b>8.10</b> Old practicals</a></li>
<li class="chapter" data-level="8.11" data-path="module-resources.html"><a href="module-resources.html#events-meet-other-spatial-data-professionals"><i class="fa fa-check"></i><b>8.11</b> Events / meet other spatial data professionals</a></li>
<li class="chapter" data-level="8.12" data-path="module-resources.html"><a href="module-resources.html#cool-stuff-to-explore"><i class="fa fa-check"></i><b>8.12</b> Cool stuff to explore</a></li>
<li class="chapter" data-level="8.13" data-path="module-resources.html"><a href="module-resources.html#booksreading-resources"><i class="fa fa-check"></i><b>8.13</b> Books/reading resources</a></li>
<li class="chapter" data-level="8.14" data-path="module-resources.html"><a href="module-resources.html#new-developments"><i class="fa fa-check"></i><b>8.14</b> New developments</a>
<ul>
<li class="chapter" data-level="8.14.1" data-path="module-resources.html"><a href="module-resources.html#twitter"><i class="fa fa-check"></i><b>8.14.1</b> Twitter</a></li>
</ul></li>
<li class="chapter" data-level="8.15" data-path="module-resources.html"><a href="module-resources.html#data-2"><i class="fa fa-check"></i><b>8.15</b> Data</a></li>
<li class="chapter" data-level="8.16" data-path="module-resources.html"><a href="module-resources.html#data-lists-1"><i class="fa fa-check"></i><b>8.16</b> Data lists</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="extra-reproducibility.html"><a href="extra-reproducibility.html"><i class="fa fa-check"></i>Extra reproducibility</a>
<ul>
<li class="chapter" data-level="8.17" data-path="extra-reproducibility.html"><a href="extra-reproducibility.html#git-and-github-1"><i class="fa fa-check"></i><b>8.17</b> Git and GitHub</a>
<ul>
<li class="chapter" data-level="8.17.1" data-path="extra-reproducibility.html"><a href="extra-reproducibility.html#back-in-time"><i class="fa fa-check"></i><b>8.17.1</b> Back in time</a></li>
</ul></li>
<li class="chapter" data-level="8.18" data-path="extra-reproducibility.html"><a href="extra-reproducibility.html#renv"><i class="fa fa-check"></i><b>8.18</b> renv</a></li>
<li class="chapter" data-level="8.19" data-path="extra-reproducibility.html"><a href="extra-reproducibility.html#referencing-and-more"><i class="fa fa-check"></i><b>8.19</b> Referencing and more</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="qgis-maps.html"><a href="qgis-maps.html"><i class="fa fa-check"></i>QGIS Maps</a>
<ul>
<li class="chapter" data-level="8.20" data-path="qgis-maps.html"><a href="qgis-maps.html#load-data-2"><i class="fa fa-check"></i><b>8.20</b> Load data</a></li>
<li class="chapter" data-level="8.21" data-path="qgis-maps.html"><a href="qgis-maps.html#manipulate-data"><i class="fa fa-check"></i><b>8.21</b> Manipulate data</a></li>
<li class="chapter" data-level="8.22" data-path="qgis-maps.html"><a href="qgis-maps.html#map-data"><i class="fa fa-check"></i><b>8.22</b> Map data</a></li>
<li class="chapter" data-level="8.23" data-path="qgis-maps.html"><a href="qgis-maps.html#export-map"><i class="fa fa-check"></i><b>8.23</b> Export map</a></li>
<li class="chapter" data-level="8.24" data-path="qgis-maps.html"><a href="qgis-maps.html#graphical-modeler"><i class="fa fa-check"></i><b>8.24</b> Graphical modeler</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tmap-version-3.html"><a href="tmap-version-3.html"><i class="fa fa-check"></i>Tmap version 3</a>
<ul>
<li class="chapter" data-level="8.25" data-path="tmap-version-3.html"><a href="tmap-version-3.html#learning-outcomes-7"><i class="fa fa-check"></i><b>8.25</b> Learning outcomes</a></li>
<li class="chapter" data-level="8.26" data-path="tmap-version-3.html"><a href="tmap-version-3.html#homework-8"><i class="fa fa-check"></i><b>8.26</b> Homework</a></li>
<li class="chapter" data-level="8.27" data-path="tmap-version-3.html"><a href="tmap-version-3.html#recommended-listening-8"><i class="fa fa-check"></i><b>8.27</b> Recommended listening 🎧</a></li>
<li class="chapter" data-level="8.28" data-path="tmap-version-3.html"><a href="tmap-version-3.html#introduction-8"><i class="fa fa-check"></i><b>8.28</b> Introduction</a>
<ul>
<li class="chapter" data-level="8.28.1" data-path="tmap-version-3.html"><a href="tmap-version-3.html#osm-3"><i class="fa fa-check"></i><b>8.28.1</b> OSM</a></li>
<li class="chapter" data-level="8.28.2" data-path="tmap-version-3.html"><a href="tmap-version-3.html#airbnb-2"><i class="fa fa-check"></i><b>8.28.2</b> Airbnb</a></li>
</ul></li>
<li class="chapter" data-level="8.29" data-path="tmap-version-3.html"><a href="tmap-version-3.html#data-3"><i class="fa fa-check"></i><b>8.29</b> Data</a>
<ul>
<li class="chapter" data-level="8.29.1" data-path="tmap-version-3.html"><a href="tmap-version-3.html#osm-4"><i class="fa fa-check"></i><b>8.29.1</b> OSM</a></li>
<li class="chapter" data-level="8.29.2" data-path="tmap-version-3.html"><a href="tmap-version-3.html#london-boroughs-1"><i class="fa fa-check"></i><b>8.29.2</b> London boroughs</a></li>
<li class="chapter" data-level="8.29.3" data-path="tmap-version-3.html"><a href="tmap-version-3.html#world-cities-1"><i class="fa fa-check"></i><b>8.29.3</b> World cities</a></li>
<li class="chapter" data-level="8.29.4" data-path="tmap-version-3.html"><a href="tmap-version-3.html#uk-outline-1"><i class="fa fa-check"></i><b>8.29.4</b> Uk outline</a></li>
<li class="chapter" data-level="8.29.5" data-path="tmap-version-3.html"><a href="tmap-version-3.html#airbnb-3"><i class="fa fa-check"></i><b>8.29.5</b> Airbnb</a></li>
</ul></li>
<li class="chapter" data-level="8.30" data-path="tmap-version-3.html"><a href="tmap-version-3.html#spatial-joining"><i class="fa fa-check"></i><b>8.30</b> Spatial joining</a>
<ul>
<li class="chapter" data-level="8.30.1" data-path="tmap-version-3.html"><a href="tmap-version-3.html#static-map"><i class="fa fa-check"></i><b>8.30.1</b> Static map</a></li>
<li class="chapter" data-level="8.30.2" data-path="tmap-version-3.html"><a href="tmap-version-3.html#inset-map"><i class="fa fa-check"></i><b>8.30.2</b> Inset map</a></li>
<li class="chapter" data-level="8.30.3" data-path="tmap-version-3.html"><a href="tmap-version-3.html#export"><i class="fa fa-check"></i><b>8.30.3</b> Export</a></li>
<li class="chapter" data-level="8.30.4" data-path="tmap-version-3.html"><a href="tmap-version-3.html#basic-interactive-map"><i class="fa fa-check"></i><b>8.30.4</b> Basic interactive map</a></li>
<li class="chapter" data-level="8.30.5" data-path="tmap-version-3.html"><a href="tmap-version-3.html#advanced-interactive-map"><i class="fa fa-check"></i><b>8.30.5</b> Advanced interactive map</a></li>
</ul></li>
<li class="chapter" data-level="8.31" data-path="tmap-version-3.html"><a href="tmap-version-3.html#bad-maps-1"><i class="fa fa-check"></i><b>8.31</b> Bad maps</a></li>
<li class="chapter" data-level="8.32" data-path="tmap-version-3.html"><a href="tmap-version-3.html#feedback-8"><i class="fa fa-check"></i><b>8.32</b> Feedback</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="functions-1.html"><a href="functions-1.html"><i class="fa fa-check"></i>Functions</a></li>
<li class="chapter" data-level="" data-path="interactive-maps.html"><a href="interactive-maps.html"><i class="fa fa-check"></i>Interactive maps</a>
<ul>
<li class="chapter" data-level="8.33" data-path="interactive-maps.html"><a href="interactive-maps.html#advanced-interactive-map-1"><i class="fa fa-check"></i><b>8.33</b> Advanced interactive map</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="past-questions.html"><a href="past-questions.html"><i class="fa fa-check"></i><b>9</b> Past questions</a></li>
<li class="chapter" data-level="10" data-path="field-trip.html"><a href="field-trip.html"><i class="fa fa-check"></i><b>10</b> Field trip</a></li>
<li class="divider"></li>
<li><center>
  <a rel="license" href="./external-usage.html#license">
    License: CC-BY-SA<br>
    <i class = "fab fa-creative-commons fa-2x"></i>
    <i class = "fab fa-creative-commons-by fa-2x"></i>
    <i class = "fab fa-creative-commons-sa fa-2x"></i>
  </a>
</li></center>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">CASA0005 Geographic Information Systems and Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tmap-version-3" class="section level1 unnumbered hasAnchor">
<h1>Tmap version 3<a href="tmap-version-3.html#tmap-version-3" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div class="infobox tip">
<p>This is the original mapping practical for tmap version 3. It has now been replaced with tmap version 4.</p>
</div>
<div id="learning-outcomes-7" class="section level2 hasAnchor" number="8.25">
<h2><span class="header-section-number">8.25</span> Learning outcomes<a href="tmap-version-3.html#learning-outcomes-7" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>By the end of this practical you should be able to:</p>
<ol style="list-style-type: decimal">
<li>List and explain basic mapping concepts across QGIS and R</li>
<li>Interpret and manipulate data from multiple sources</li>
<li>Create near publishable static and interactive mapped outputs</li>
<li>Evaluate and critique mapping approaches between QGIS and R</li>
</ol>
</div>
<div id="homework-8" class="section level2 hasAnchor" number="8.26">
<h2><span class="header-section-number">8.26</span> Homework<a href="tmap-version-3.html#homework-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Outside of our scheduled sessions you should be doing around 12 hours of extra study per week. Feel free to follow your own GIS interests, but good places to start include the following:</p>
<div class="infobox assignment">
<p><strong>Exam</strong></p>
<p>Each week we will provide a short task to test your knowledge, these should be used to guide your study for the final exam.</p>
<p>The task this week is to:</p>
<ul>
<li>Fork the repository below you from the spreadsheet last week</li>
<li>Run the code, editing it if required</li>
<li>Create a map (you can use additional data if you wish)</li>
<li>submit a pull request to the original person</li>
</ul>
</div>
<div class="infobox note">
<p><strong>Reading</strong></p>
<p>This week:</p>
<ul>
<li><p><a href="https://geocompr.robinlovelace.net/adv-map.html">Chapter 8 “Making maps with R”</a> from Geocomputation with R by Lovelace, Nowosad and Muenchow (2020)</p></li>
<li><p><a href="https://ucl.primo.exlibrisgroup.com/discovery/fulldisplay?docid=alma990000462680204761&amp;context=L&amp;vid=44UCL_INST:UCL_VU2">How to lie with maps, Chapter 10</a> by Monmonier (1996).</p></li>
</ul>
<p><strong>Watching</strong></p>
<ul>
<li><a href="https://www.youtube.com/watch?v=CfrmHSmwOoo">Episode 1 of Maptastic from the Financial Times with Professor Alasdair Rae formerly of the University of Sheffield</a>.</li>
</ul>
<p>Remember this is just a starting point, explore the <a href="https://rl.talis.com/3/ucl/lists/139FBAF8-DACD-60FB-8BDC-E9C9E09BA885.html?lang=en-GB&amp;login=1">reading list</a>, practical and lecture for more ideas.</p>
</div>
</div>
<div id="recommended-listening-8" class="section level2 hasAnchor" number="8.27">
<h2><span class="header-section-number">8.27</span> Recommended listening 🎧<a href="#recommended-listening-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Some of these practicals are long, take regular breaks and have a listen to some of our fav tunes each week.</p>
<p><a href="https://open.spotify.com/album/0Wmnkh4lzGy5rgkUPOjYbg">Andy</a>. Mumford &amp; Sons, unique sound classed as British folk rock apparently. Enjoy!</p>
<p><a href="https://open.spotify.com/album/6QcNw2Tt4KxraptfxcYzNy">Adam</a> Your ears are in for an absolute treat this week. Hospital Records have only gone and put out a mind-blowing mini compilation album which completely smashes it. It’s NHS400 - get your ears around this!</p>
</div>
<div id="introduction-8" class="section level2 hasAnchor" number="8.28">
<h2><span class="header-section-number">8.28</span> Introduction<a href="tmap-version-3.html#introduction-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In this practical we’re going to focus on creating mapped outputs in R. For fun we’re going to use data from OpenStreetMap (OSM) and Airbnb.</p>
<div class="infobox warning">
<p>Within this practical we show how to make maps in <strong>just</strong> R. We used to provide instructions for QGIS and these have been moved to the additional resources section. It is useful to have some knowledge of QGIS for your future career but it is not needed for the exam.</p>
</div>
<div id="osm-3" class="section level3 hasAnchor" number="8.28.1">
<h3><span class="header-section-number">8.28.1</span> OSM<a href="tmap-version-3.html#osm-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>OpenStreetMap is collaborative project that has created a free editable map of the World. As users can create their own content it is classed as Volunteered geographic Information (VGI). There is a lot of academic literature on VGI, it’s advnatages and disadvantages. For an overview of VGI checkout this <a href="https://link.springer.com/article/10.1007/s10708-007-9111-y">article</a> by Goodchild (2007).</p>
<p>If you are interested in exploring the power of VGI and OSM further checkout <a href="https://www.missingmaps.org/">missing maps</a>. They aim to map missing places, often in less developed countires, using OSM so that when natural disasters occur first responders can make data informed decisions. They run events all over the world and it’s worth going to meet other spatial professionals, gain some experience with OSM and contribute to a good cause.</p>
</div>
<div id="airbnb-2" class="section level3 hasAnchor" number="8.28.2">
<h3><span class="header-section-number">8.28.2</span> Airbnb<a href="tmap-version-3.html#airbnb-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Airbnb is an online marketplace that connects people looking to rent homes to those seeking accommodation often over short time periods.</p>
</div>
</div>
<div id="data-3" class="section level2 hasAnchor" number="8.29">
<h2><span class="header-section-number">8.29</span> Data<a href="tmap-version-3.html#data-3" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>It’s possible to download OSM data straight from the website, although the interface can be a little unreliable (it works better for small areas). There are, however, a number of websites that allow OSM data to be downloaded more easily and are directly linked to from the ‘Export’ option in OSM. Geofabrik (one of these websites) allows you to download frequently updated shapefiles for various global subdivisions.</p>
<div id="osm-4" class="section level3 hasAnchor" number="8.29.1">
<h3><span class="header-section-number">8.29.1</span> OSM<a href="tmap-version-3.html#osm-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><p>Go to the Geofabrik download server <a href="http://download.geofabrik.de/">website</a></p></li>
<li><p>Navigate to: Europe &gt; United Kingdom &gt; England &gt; Greater London</p></li>
<li><p>Download greater-london-latest-free.shp.zip</p></li>
<li><p>Unzip the data and save it to your current folder</p></li>
</ol>
</div>
<div id="london-boroughs-1" class="section level3 hasAnchor" number="8.29.2">
<h3><span class="header-section-number">8.29.2</span> London boroughs<a href="tmap-version-3.html#london-boroughs-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We’ll use our London boroughs layer again, either load it from week 1 or download it:</p>
<ol style="list-style-type: decimal">
<li><p>To get the data go to <a href="https://data.london.gov.uk/">the London data store</a></p></li>
<li><p>Search for Statistical GIS Boundary Files for London</p></li>
<li><p>Download the statistical-gis-boundaries-london.zip</p></li>
<li><p>Unzip the data and save it to your current folder</p></li>
</ol>
</div>
<div id="world-cities-1" class="section level3 hasAnchor" number="8.29.3">
<h3><span class="header-section-number">8.29.3</span> World cities<a href="tmap-version-3.html#world-cities-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will use World cities to provide some context to our maps.</p>
<ol style="list-style-type: decimal">
<li>Download them from the <a href="https://hub.arcgis.com/datasets/6996f03a1b364dbab4008d99380370ed_0">ArcGIS HUB</a> &gt; Download &gt; Shapefile.</li>
</ol>
</div>
<div id="uk-outline-1" class="section level3 hasAnchor" number="8.29.4">
<h3><span class="header-section-number">8.29.4</span> Uk outline<a href="tmap-version-3.html#uk-outline-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Download <a href="https://gadm.org/download_country.html">GADM data for the UK</a></li>
</ol>
</div>
<div id="airbnb-3" class="section level3 hasAnchor" number="8.29.5">
<h3><span class="header-section-number">8.29.5</span> Airbnb<a href="tmap-version-3.html#airbnb-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li>Download the <code>listings.csv</code> from the <a href="http://insideairbnb.com/get-the-data.html">inside airbnb website</a> for London.</li>
</ol>
<div class="infobox warning">
<p>In the lecture we discussed how when producing maps there should be some sort of common denominator as opposed to mapping raw counts. Go and source a suitable common denominator then using the skills from previous weeks normalise your data. <strong>Hint</strong> there is a table on the <a href="https://www.nomisweb.co.uk/census/2011/data_finder">Office for National Statistics NOMIS website</a> called number of bedrooms which would let you normalise the airbnb and hotel data based on the number of bedrooms in each ward.</p>
</div>
</div>
</div>
<div id="spatial-joining" class="section level2 hasAnchor" number="8.30">
<h2><span class="header-section-number">8.30</span> Spatial joining<a href="tmap-version-3.html#spatial-joining" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>I will note that i have made use of a new function called <code>st_join()</code>. This is similar to the the joins we explored with attribute data (e.g. joining based on a unique attribute column) but here we just want to join datasets together and keep all their attribute data, this is useful in the code below where i want to join assign the London Borough to each hotel in London. The output will be a massive dataset where each hotel will be a new row and will retain the attributes of the hotel data but also append the attribute of the borough….<code>st_join()</code> defaults to a left join, so in this case the borough data is the left dataset and all the right data has been appended to it. If the left data (borough) had no matches (so no hotels) they would still appear in the final dataset. The default argument for this is <code>st_intersects</code> but we will explore this more next week.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb484-1"><a href="tmap-version-3.html#cb484-1" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb484-2"><a href="tmap-version-3.html#cb484-2" tabindex="-1"></a></span>
<span id="cb484-3"><a href="tmap-version-3.html#cb484-3" tabindex="-1"></a>Londonborough <span class="ot">&lt;-</span> <span class="fu">st_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Prac1_data&quot;</span>,</span>
<span id="cb484-4"><a href="tmap-version-3.html#cb484-4" tabindex="-1"></a>                                    <span class="st">&quot;statistical-gis-boundaries-london&quot;</span>, </span>
<span id="cb484-5"><a href="tmap-version-3.html#cb484-5" tabindex="-1"></a>                                    <span class="st">&quot;ESRI&quot;</span>, </span>
<span id="cb484-6"><a href="tmap-version-3.html#cb484-6" tabindex="-1"></a>                                    <span class="st">&quot;London_Borough_Excluding_MHW.shp&quot;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb484-7"><a href="tmap-version-3.html#cb484-7" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">27700</span>)</span>
<span id="cb484-8"><a href="tmap-version-3.html#cb484-8" tabindex="-1"></a></span>
<span id="cb484-9"><a href="tmap-version-3.html#cb484-9" tabindex="-1"></a>OSM <span class="ot">&lt;-</span> <span class="fu">st_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;prac5_data&quot;</span>,</span>
<span id="cb484-10"><a href="tmap-version-3.html#cb484-10" tabindex="-1"></a>                          <span class="st">&quot;greater-london-latest-free.shp&quot;</span>, </span>
<span id="cb484-11"><a href="tmap-version-3.html#cb484-11" tabindex="-1"></a>                          <span class="st">&quot;gis_osm_pois_a_free_1.shp&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb484-12"><a href="tmap-version-3.html#cb484-12" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">27700</span>) <span class="sc">%&gt;%</span></span>
<span id="cb484-13"><a href="tmap-version-3.html#cb484-13" tabindex="-1"></a>  <span class="co">#select hotels only</span></span>
<span id="cb484-14"><a href="tmap-version-3.html#cb484-14" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(fclass <span class="sc">==</span> <span class="st">&#39;hotel&#39;</span>)</span>
<span id="cb484-15"><a href="tmap-version-3.html#cb484-15" tabindex="-1"></a></span>
<span id="cb484-16"><a href="tmap-version-3.html#cb484-16" tabindex="-1"></a></span>
<span id="cb484-17"><a href="tmap-version-3.html#cb484-17" tabindex="-1"></a>join_example <span class="ot">&lt;-</span>  <span class="fu">st_join</span>(Londonborough, OSM)</span>
<span id="cb484-18"><a href="tmap-version-3.html#cb484-18" tabindex="-1"></a></span>
<span id="cb484-19"><a href="tmap-version-3.html#cb484-19" tabindex="-1"></a><span class="fu">head</span>(join_example)</span></code></pre></div>
<div id="static-map" class="section level3 hasAnchor" number="8.30.1">
<h3><span class="header-section-number">8.30.1</span> Static map<a href="tmap-version-3.html#static-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb485"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb485-1"><a href="tmap-version-3.html#cb485-1" tabindex="-1"></a><span class="do">##Load all our data</span></span>
<span id="cb485-2"><a href="tmap-version-3.html#cb485-2" tabindex="-1"></a><span class="fu">library</span>(sf)</span>
<span id="cb485-3"><a href="tmap-version-3.html#cb485-3" tabindex="-1"></a><span class="fu">library</span>(tmap)</span>
<span id="cb485-4"><a href="tmap-version-3.html#cb485-4" tabindex="-1"></a><span class="fu">library</span>(tmaptools)</span>
<span id="cb485-5"><a href="tmap-version-3.html#cb485-5" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb485-6"><a href="tmap-version-3.html#cb485-6" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb485-7"><a href="tmap-version-3.html#cb485-7" tabindex="-1"></a></span>
<span id="cb485-8"><a href="tmap-version-3.html#cb485-8" tabindex="-1"></a><span class="co"># read in all the spatial data and </span></span>
<span id="cb485-9"><a href="tmap-version-3.html#cb485-9" tabindex="-1"></a><span class="co"># reproject it </span></span>
<span id="cb485-10"><a href="tmap-version-3.html#cb485-10" tabindex="-1"></a></span>
<span id="cb485-11"><a href="tmap-version-3.html#cb485-11" tabindex="-1"></a>OSM <span class="ot">&lt;-</span> <span class="fu">st_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;prac5_data&quot;</span>,</span>
<span id="cb485-12"><a href="tmap-version-3.html#cb485-12" tabindex="-1"></a>                          <span class="st">&quot;greater-london-latest-free.shp&quot;</span>, </span>
<span id="cb485-13"><a href="tmap-version-3.html#cb485-13" tabindex="-1"></a>                          <span class="st">&quot;gis_osm_pois_a_free_1.shp&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb485-14"><a href="tmap-version-3.html#cb485-14" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">27700</span>) <span class="sc">%&gt;%</span></span>
<span id="cb485-15"><a href="tmap-version-3.html#cb485-15" tabindex="-1"></a>  <span class="co">#select hotels only</span></span>
<span id="cb485-16"><a href="tmap-version-3.html#cb485-16" tabindex="-1"></a>  <span class="fu">filter</span>(fclass <span class="sc">==</span> <span class="st">&#39;hotel&#39;</span>)</span>
<span id="cb485-17"><a href="tmap-version-3.html#cb485-17" tabindex="-1"></a></span>
<span id="cb485-18"><a href="tmap-version-3.html#cb485-18" tabindex="-1"></a>Worldcities <span class="ot">&lt;-</span> <span class="fu">st_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;prac5_data&quot;</span>, </span>
<span id="cb485-19"><a href="tmap-version-3.html#cb485-19" tabindex="-1"></a>                                  <span class="st">&quot;World_Cities&quot;</span>, </span>
<span id="cb485-20"><a href="tmap-version-3.html#cb485-20" tabindex="-1"></a>                                  <span class="st">&quot;World_Cities.shp&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb485-21"><a href="tmap-version-3.html#cb485-21" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">27700</span>)</span>
<span id="cb485-22"><a href="tmap-version-3.html#cb485-22" tabindex="-1"></a></span>
<span id="cb485-23"><a href="tmap-version-3.html#cb485-23" tabindex="-1"></a>UK_outline <span class="ot">&lt;-</span> <span class="fu">st_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;prac5_data&quot;</span>, </span>
<span id="cb485-24"><a href="tmap-version-3.html#cb485-24" tabindex="-1"></a>                                 <span class="st">&quot;gadm36_GBR_shp&quot;</span>, </span>
<span id="cb485-25"><a href="tmap-version-3.html#cb485-25" tabindex="-1"></a>                                 <span class="st">&quot;gadm36_GBR_0.shp&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb485-26"><a href="tmap-version-3.html#cb485-26" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">27700</span>)</span>
<span id="cb485-27"><a href="tmap-version-3.html#cb485-27" tabindex="-1"></a></span>
<span id="cb485-28"><a href="tmap-version-3.html#cb485-28" tabindex="-1"></a><span class="co">#London Borough data is already in 277000</span></span>
<span id="cb485-29"><a href="tmap-version-3.html#cb485-29" tabindex="-1"></a>Londonborough <span class="ot">&lt;-</span> <span class="fu">st_read</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;Prac1_data&quot;</span>,</span>
<span id="cb485-30"><a href="tmap-version-3.html#cb485-30" tabindex="-1"></a>                                    <span class="st">&quot;statistical-gis-boundaries-london&quot;</span>, </span>
<span id="cb485-31"><a href="tmap-version-3.html#cb485-31" tabindex="-1"></a>                                    <span class="st">&quot;ESRI&quot;</span>, </span>
<span id="cb485-32"><a href="tmap-version-3.html#cb485-32" tabindex="-1"></a>                                    <span class="st">&quot;London_Borough_Excluding_MHW.shp&quot;</span>))<span class="sc">%&gt;%</span></span>
<span id="cb485-33"><a href="tmap-version-3.html#cb485-33" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">27700</span>)</span>
<span id="cb485-34"><a href="tmap-version-3.html#cb485-34" tabindex="-1"></a></span>
<span id="cb485-35"><a href="tmap-version-3.html#cb485-35" tabindex="-1"></a><span class="co"># read in the .csv</span></span>
<span id="cb485-36"><a href="tmap-version-3.html#cb485-36" tabindex="-1"></a><span class="co"># and make it into spatial data</span></span>
<span id="cb485-37"><a href="tmap-version-3.html#cb485-37" tabindex="-1"></a></span>
<span id="cb485-38"><a href="tmap-version-3.html#cb485-38" tabindex="-1"></a>Airbnb <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;prac5_data/listings.csv&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb485-39"><a href="tmap-version-3.html#cb485-39" tabindex="-1"></a>  <span class="co"># longitude is considered x value here, latitude is y</span></span>
<span id="cb485-40"><a href="tmap-version-3.html#cb485-40" tabindex="-1"></a>  <span class="fu">st_as_sf</span>(., <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;longitude&quot;</span>, <span class="st">&quot;latitude&quot;</span>), </span>
<span id="cb485-41"><a href="tmap-version-3.html#cb485-41" tabindex="-1"></a>                   <span class="at">crs =</span> <span class="dv">4326</span>) <span class="sc">%&gt;%</span></span>
<span id="cb485-42"><a href="tmap-version-3.html#cb485-42" tabindex="-1"></a>    <span class="fu">st_transform</span>(., <span class="dv">27700</span>)<span class="sc">%&gt;%</span></span>
<span id="cb485-43"><a href="tmap-version-3.html#cb485-43" tabindex="-1"></a>    <span class="co">#select entire places that are available all year</span></span>
<span id="cb485-44"><a href="tmap-version-3.html#cb485-44" tabindex="-1"></a>    <span class="fu">filter</span>(room_type <span class="sc">==</span> <span class="st">&#39;Entire home/apt&#39;</span> <span class="sc">&amp;</span> availability_365 <span class="sc">==</span><span class="st">&#39;365&#39;</span>)</span>
<span id="cb485-45"><a href="tmap-version-3.html#cb485-45" tabindex="-1"></a></span>
<span id="cb485-46"><a href="tmap-version-3.html#cb485-46" tabindex="-1"></a></span>
<span id="cb485-47"><a href="tmap-version-3.html#cb485-47" tabindex="-1"></a><span class="co"># make a function for the join</span></span>
<span id="cb485-48"><a href="tmap-version-3.html#cb485-48" tabindex="-1"></a><span class="co"># functions are covered in practical 7</span></span>
<span id="cb485-49"><a href="tmap-version-3.html#cb485-49" tabindex="-1"></a><span class="co"># but see if you can work out what is going on</span></span>
<span id="cb485-50"><a href="tmap-version-3.html#cb485-50" tabindex="-1"></a><span class="co"># hint all you have to do is replace data1 and data2</span></span>
<span id="cb485-51"><a href="tmap-version-3.html#cb485-51" tabindex="-1"></a><span class="co"># with the data you want to use</span></span>
<span id="cb485-52"><a href="tmap-version-3.html#cb485-52" tabindex="-1"></a></span>
<span id="cb485-53"><a href="tmap-version-3.html#cb485-53" tabindex="-1"></a>Joinfun <span class="ot">&lt;-</span> <span class="cf">function</span>(data1, data2){</span>
<span id="cb485-54"><a href="tmap-version-3.html#cb485-54" tabindex="-1"></a></span>
<span id="cb485-55"><a href="tmap-version-3.html#cb485-55" tabindex="-1"></a>output<span class="ot">&lt;-</span> data1<span class="sc">%&gt;%</span></span>
<span id="cb485-56"><a href="tmap-version-3.html#cb485-56" tabindex="-1"></a>  <span class="fu">st_join</span>(data2,.) <span class="sc">%&gt;%</span></span>
<span id="cb485-57"><a href="tmap-version-3.html#cb485-57" tabindex="-1"></a>  <span class="fu">add_count</span>(GSS_CODE, <span class="at">name=</span><span class="st">&quot;hotels_in_borough&quot;</span>) </span>
<span id="cb485-58"><a href="tmap-version-3.html#cb485-58" tabindex="-1"></a></span>
<span id="cb485-59"><a href="tmap-version-3.html#cb485-59" tabindex="-1"></a>  <span class="fu">return</span>(output)</span>
<span id="cb485-60"><a href="tmap-version-3.html#cb485-60" tabindex="-1"></a>}</span>
<span id="cb485-61"><a href="tmap-version-3.html#cb485-61" tabindex="-1"></a></span>
<span id="cb485-62"><a href="tmap-version-3.html#cb485-62" tabindex="-1"></a><span class="co"># use the function for hotels</span></span>
<span id="cb485-63"><a href="tmap-version-3.html#cb485-63" tabindex="-1"></a>Hotels <span class="ot">&lt;-</span> <span class="fu">Joinfun</span>(OSM, Londonborough)</span>
<span id="cb485-64"><a href="tmap-version-3.html#cb485-64" tabindex="-1"></a></span>
<span id="cb485-65"><a href="tmap-version-3.html#cb485-65" tabindex="-1"></a><span class="co"># then for airbnb</span></span>
<span id="cb485-66"><a href="tmap-version-3.html#cb485-66" tabindex="-1"></a><span class="co"># this is incorrect - change to airbnb2 to look at result</span></span>
<span id="cb485-67"><a href="tmap-version-3.html#cb485-67" tabindex="-1"></a>Airbnb <span class="ot">&lt;-</span> <span class="fu">Joinfun</span>(Airbnb, Londonborough)</span>
<span id="cb485-68"><a href="tmap-version-3.html#cb485-68" tabindex="-1"></a> </span>
<span id="cb485-69"><a href="tmap-version-3.html#cb485-69" tabindex="-1"></a>Worldcities2 <span class="ot">&lt;-</span> Worldcities <span class="sc">%&gt;%</span></span>
<span id="cb485-70"><a href="tmap-version-3.html#cb485-70" tabindex="-1"></a>  <span class="fu">filter</span>(CNTRY_NAME<span class="sc">==</span><span class="st">&#39;United Kingdom&#39;</span><span class="sc">&amp;</span></span>
<span id="cb485-71"><a href="tmap-version-3.html#cb485-71" tabindex="-1"></a>           Worldcities<span class="sc">$</span>CITY_NAME<span class="sc">==</span><span class="st">&#39;Birmingham&#39;</span><span class="sc">|</span></span>
<span id="cb485-72"><a href="tmap-version-3.html#cb485-72" tabindex="-1"></a>           Worldcities<span class="sc">$</span>CITY_NAME<span class="sc">==</span><span class="st">&#39;London&#39;</span><span class="sc">|</span></span>
<span id="cb485-73"><a href="tmap-version-3.html#cb485-73" tabindex="-1"></a>           Worldcities<span class="sc">$</span>CITY_NAME<span class="sc">==</span><span class="st">&#39;Edinburgh&#39;</span>)</span>
<span id="cb485-74"><a href="tmap-version-3.html#cb485-74" tabindex="-1"></a></span>
<span id="cb485-75"><a href="tmap-version-3.html#cb485-75" tabindex="-1"></a>newbb <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">xmin=</span><span class="sc">-</span><span class="dv">296000</span>, <span class="at">ymin=</span><span class="dv">5408</span>, <span class="at">xmax=</span><span class="dv">655696</span>, <span class="at">ymax=</span><span class="dv">1000000</span>)</span>
<span id="cb485-76"><a href="tmap-version-3.html#cb485-76" tabindex="-1"></a>  </span>
<span id="cb485-77"><a href="tmap-version-3.html#cb485-77" tabindex="-1"></a>UK_outlinecrop <span class="ot">&lt;-</span> UK_outline<span class="sc">$</span>geometry <span class="sc">%&gt;%</span></span>
<span id="cb485-78"><a href="tmap-version-3.html#cb485-78" tabindex="-1"></a>  <span class="fu">st_crop</span>(., newbb)</span>
<span id="cb485-79"><a href="tmap-version-3.html#cb485-79" tabindex="-1"></a></span>
<span id="cb485-80"><a href="tmap-version-3.html#cb485-80" tabindex="-1"></a>Hotels <span class="ot">&lt;-</span> Hotels <span class="sc">%&gt;%</span></span>
<span id="cb485-81"><a href="tmap-version-3.html#cb485-81" tabindex="-1"></a>  <span class="co">#at the moment each hotel is a row for the borough</span></span>
<span id="cb485-82"><a href="tmap-version-3.html#cb485-82" tabindex="-1"></a>  <span class="co">#we just one one row that has number of airbnbs</span></span>
<span id="cb485-83"><a href="tmap-version-3.html#cb485-83" tabindex="-1"></a>  <span class="fu">group_by</span>(., GSS_CODE, NAME)<span class="sc">%&gt;%</span></span>
<span id="cb485-84"><a href="tmap-version-3.html#cb485-84" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">`</span><span class="at">Accomodation count</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">unique</span>(hotels_in_borough))</span>
<span id="cb485-85"><a href="tmap-version-3.html#cb485-85" tabindex="-1"></a></span>
<span id="cb485-86"><a href="tmap-version-3.html#cb485-86" tabindex="-1"></a>Airbnb <span class="ot">&lt;-</span> Airbnb <span class="sc">%&gt;%</span></span>
<span id="cb485-87"><a href="tmap-version-3.html#cb485-87" tabindex="-1"></a>  <span class="fu">group_by</span>(., GSS_CODE, NAME)<span class="sc">%&gt;%</span></span>
<span id="cb485-88"><a href="tmap-version-3.html#cb485-88" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="st">`</span><span class="at">Accomodation count</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">unique</span>(hotels_in_borough))</span></code></pre></div>
<p>This is actually incorrect and we will see why after reading week. Essentially there are two boroughs that have 0 airbnbs with our filters - Kingston upon Thames and Sutton. They don’t appear on the QGIS map and you can explore them on the interactive map later on…</p>
<p>However, in our data a they have a value of 1…why?</p>
<p>Well because this spatial join is like a left join. The Boroughs will always exist (there is always a row of Sutton) we have then grouped by and summarised the Borough (Sutton) and as it has a row it will return a value of 1 even through it is actually 0. To explore this you will need to break the code above, change <code>Airbnb &lt;- Joinfun(Airbnb, Londonborough)</code> to <code>Airbnb2 &lt;- Joinfun(Airbnb, Londonborough)</code> and explore the <code>Airbnb2</code> object - Sutton will have a single row but no Airbnb names!</p>
<p>Let’s check this…from the code below Sutton has 1 Airbnb (meeting our criteria) however we know it does not!</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="tmap-version-3.html#cb486-1" tabindex="-1"></a>Airbnb <span class="sc">%&gt;%</span></span>
<span id="cb486-2"><a href="tmap-version-3.html#cb486-2" tabindex="-1"></a>  <span class="fu">filter</span>(NAME<span class="sc">==</span><span class="st">&quot;Sutton&quot;</span>)</span></code></pre></div>
<p>Make the map</p>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="tmap-version-3.html#cb487-1" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;plot&quot;</span>)</span>
<span id="cb487-2"><a href="tmap-version-3.html#cb487-2" tabindex="-1"></a></span>
<span id="cb487-3"><a href="tmap-version-3.html#cb487-3" tabindex="-1"></a><span class="co"># set the breaks</span></span>
<span id="cb487-4"><a href="tmap-version-3.html#cb487-4" tabindex="-1"></a><span class="co"># for our mapped data</span></span>
<span id="cb487-5"><a href="tmap-version-3.html#cb487-5" tabindex="-1"></a>breaks <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">12</span>, <span class="dv">26</span>, <span class="dv">57</span>, <span class="dv">286</span>) </span>
<span id="cb487-6"><a href="tmap-version-3.html#cb487-6" tabindex="-1"></a></span>
<span id="cb487-7"><a href="tmap-version-3.html#cb487-7" tabindex="-1"></a><span class="co"># plot each map</span></span>
<span id="cb487-8"><a href="tmap-version-3.html#cb487-8" tabindex="-1"></a>tm1 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Hotels) <span class="sc">+</span> </span>
<span id="cb487-9"><a href="tmap-version-3.html#cb487-9" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Accomodation count&quot;</span>, </span>
<span id="cb487-10"><a href="tmap-version-3.html#cb487-10" tabindex="-1"></a>              <span class="at">breaks=</span>breaks,</span>
<span id="cb487-11"><a href="tmap-version-3.html#cb487-11" tabindex="-1"></a>              <span class="at">palette=</span><span class="st">&quot;PuBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb487-12"><a href="tmap-version-3.html#cb487-12" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">show=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb487-13"><a href="tmap-version-3.html#cb487-13" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb487-14"><a href="tmap-version-3.html#cb487-14" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">&quot;(a)&quot;</span>, <span class="at">position=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.85</span>), <span class="at">size=</span><span class="fl">1.5</span>)</span>
<span id="cb487-15"><a href="tmap-version-3.html#cb487-15" tabindex="-1"></a></span>
<span id="cb487-16"><a href="tmap-version-3.html#cb487-16" tabindex="-1"></a>tm2 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Airbnb) <span class="sc">+</span> </span>
<span id="cb487-17"><a href="tmap-version-3.html#cb487-17" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Accomodation count&quot;</span>,</span>
<span id="cb487-18"><a href="tmap-version-3.html#cb487-18" tabindex="-1"></a>              <span class="at">breaks=</span>breaks, </span>
<span id="cb487-19"><a href="tmap-version-3.html#cb487-19" tabindex="-1"></a>              <span class="at">palette=</span><span class="st">&quot;PuBu&quot;</span>) <span class="sc">+</span> </span>
<span id="cb487-20"><a href="tmap-version-3.html#cb487-20" tabindex="-1"></a>  <span class="fu">tm_legend</span>(<span class="at">show=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb487-21"><a href="tmap-version-3.html#cb487-21" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb487-22"><a href="tmap-version-3.html#cb487-22" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">&quot;(b)&quot;</span>, <span class="at">position=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.85</span>), <span class="at">size=</span><span class="fl">1.5</span>)</span>
<span id="cb487-23"><a href="tmap-version-3.html#cb487-23" tabindex="-1"></a></span>
<span id="cb487-24"><a href="tmap-version-3.html#cb487-24" tabindex="-1"></a>tm3 <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(UK_outlinecrop)<span class="sc">+</span> </span>
<span id="cb487-25"><a href="tmap-version-3.html#cb487-25" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="at">col=</span><span class="st">&quot;darkslategray1&quot;</span>)<span class="sc">+</span></span>
<span id="cb487-26"><a href="tmap-version-3.html#cb487-26" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb487-27"><a href="tmap-version-3.html#cb487-27" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Worldcities2) <span class="sc">+</span></span>
<span id="cb487-28"><a href="tmap-version-3.html#cb487-28" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">scale =</span> .<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb487-29"><a href="tmap-version-3.html#cb487-29" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">&quot;CITY_NAME&quot;</span>, <span class="at">xmod=</span><span class="sc">-</span><span class="dv">1</span>, <span class="at">ymod=</span><span class="sc">-</span><span class="fl">0.5</span>)</span>
<span id="cb487-30"><a href="tmap-version-3.html#cb487-30" tabindex="-1"></a></span>
<span id="cb487-31"><a href="tmap-version-3.html#cb487-31" tabindex="-1"></a>legend <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Hotels) <span class="sc">+</span></span>
<span id="cb487-32"><a href="tmap-version-3.html#cb487-32" tabindex="-1"></a>    <span class="fu">tm_polygons</span>(<span class="st">&quot;Accomodation count&quot;</span>,</span>
<span id="cb487-33"><a href="tmap-version-3.html#cb487-33" tabindex="-1"></a>                <span class="at">breaks=</span>breaks,</span>
<span id="cb487-34"><a href="tmap-version-3.html#cb487-34" tabindex="-1"></a>                <span class="at">palette=</span><span class="st">&quot;PuBu&quot;</span>) <span class="sc">+</span></span>
<span id="cb487-35"><a href="tmap-version-3.html#cb487-35" tabindex="-1"></a>    <span class="fu">tm_scale_bar</span>(<span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.04</span>), <span class="at">text.size=</span><span class="fl">0.6</span>)<span class="sc">+</span></span>
<span id="cb487-36"><a href="tmap-version-3.html#cb487-36" tabindex="-1"></a>    <span class="fu">tm_compass</span>(<span class="at">north=</span><span class="dv">0</span>, <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.65</span>,<span class="fl">0.6</span>))<span class="sc">+</span></span>
<span id="cb487-37"><a href="tmap-version-3.html#cb487-37" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">legend.only =</span> <span class="cn">TRUE</span>, <span class="at">legend.position=</span><span class="fu">c</span>(<span class="fl">0.2</span>,<span class="fl">0.25</span>),<span class="at">asp=</span><span class="fl">0.1</span>)<span class="sc">+</span></span>
<span id="cb487-38"><a href="tmap-version-3.html#cb487-38" tabindex="-1"></a>    <span class="fu">tm_credits</span>(<span class="st">&quot;(c) OpenStreetMap contrbutors and Air b n b&quot;</span>, <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.0</span>,<span class="fl">0.0</span>))</span>
<span id="cb487-39"><a href="tmap-version-3.html#cb487-39" tabindex="-1"></a>  </span>
<span id="cb487-40"><a href="tmap-version-3.html#cb487-40" tabindex="-1"></a>t<span class="ot">=</span><span class="fu">tmap_arrange</span>(tm1, tm2, tm3, legend, <span class="at">ncol=</span><span class="dv">2</span>)</span>
<span id="cb487-41"><a href="tmap-version-3.html#cb487-41" tabindex="-1"></a></span>
<span id="cb487-42"><a href="tmap-version-3.html#cb487-42" tabindex="-1"></a>t</span></code></pre></div>
<p>We can also arrange our maps using the <code>grid</code> package…</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb488-1"><a href="tmap-version-3.html#cb488-1" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb488-2"><a href="tmap-version-3.html#cb488-2" tabindex="-1"></a><span class="co"># erases the current device or moves to a new page </span></span>
<span id="cb488-3"><a href="tmap-version-3.html#cb488-3" tabindex="-1"></a><span class="co"># probably not needed but makes sure you are plotting on a new page.</span></span>
<span id="cb488-4"><a href="tmap-version-3.html#cb488-4" tabindex="-1"></a><span class="fu">grid.newpage</span>()</span>
<span id="cb488-5"><a href="tmap-version-3.html#cb488-5" tabindex="-1"></a></span>
<span id="cb488-6"><a href="tmap-version-3.html#cb488-6" tabindex="-1"></a><span class="fu">pushViewport</span>(<span class="fu">viewport</span>(<span class="at">layout=</span><span class="fu">grid.layout</span>(<span class="dv">2</span>,<span class="dv">2</span>)))</span>
<span id="cb488-7"><a href="tmap-version-3.html#cb488-7" tabindex="-1"></a><span class="fu">print</span>(tm1, <span class="at">vp=</span><span class="fu">viewport</span>(<span class="at">layout.pos.col=</span><span class="dv">1</span>, <span class="at">layout.pos.row=</span><span class="dv">1</span>, <span class="at">height=</span><span class="dv">5</span>))</span>
<span id="cb488-8"><a href="tmap-version-3.html#cb488-8" tabindex="-1"></a><span class="fu">print</span>(tm2, <span class="at">vp=</span><span class="fu">viewport</span>(<span class="at">layout.pos.col=</span><span class="dv">2</span>, <span class="at">layout.pos.row=</span><span class="dv">1</span>, <span class="at">height=</span><span class="dv">5</span>))</span>
<span id="cb488-9"><a href="tmap-version-3.html#cb488-9" tabindex="-1"></a><span class="fu">print</span>(tm3, <span class="at">vp=</span><span class="fu">viewport</span>(<span class="at">layout.pos.col=</span><span class="dv">1</span>, <span class="at">layout.pos.row=</span><span class="dv">2</span>, <span class="at">height=</span><span class="dv">5</span>))</span>
<span id="cb488-10"><a href="tmap-version-3.html#cb488-10" tabindex="-1"></a><span class="fu">print</span>(legend, <span class="at">vp=</span><span class="fu">viewport</span>(<span class="at">layout.pos.col=</span><span class="dv">2</span>, <span class="at">layout.pos.row=</span><span class="dv">2</span>, <span class="at">height=</span><span class="dv">5</span>))</span></code></pre></div>
</div>
<div id="inset-map" class="section level3 hasAnchor" number="8.30.2">
<h3><span class="header-section-number">8.30.2</span> Inset map<a href="tmap-version-3.html#inset-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="tmap-version-3.html#cb489-1" tabindex="-1"></a>Londonbb <span class="ot">&lt;-</span> <span class="fu">st_bbox</span>(Airbnb,</span>
<span id="cb489-2"><a href="tmap-version-3.html#cb489-2" tabindex="-1"></a>                    <span class="at">crs =</span> <span class="fu">st_crs</span>(Airbnb))<span class="sc">%&gt;%</span></span>
<span id="cb489-3"><a href="tmap-version-3.html#cb489-3" tabindex="-1"></a>  <span class="co">#we need this to convert it into a class of sf</span></span>
<span id="cb489-4"><a href="tmap-version-3.html#cb489-4" tabindex="-1"></a>  <span class="co"># otherwise it our bb won&#39;t have a class it will just be x and y coordinates for the box</span></span>
<span id="cb489-5"><a href="tmap-version-3.html#cb489-5" tabindex="-1"></a>  <span class="co"># this makes it into a polygon</span></span>
<span id="cb489-6"><a href="tmap-version-3.html#cb489-6" tabindex="-1"></a>  <span class="fu">st_as_sfc</span>()</span></code></pre></div>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="tmap-version-3.html#cb490-1" tabindex="-1"></a>main <span class="ot">&lt;-</span> <span class="fu">tm_shape</span>(Airbnb, <span class="at">bbbox =</span> Londonbb) <span class="sc">+</span> </span>
<span id="cb490-2"><a href="tmap-version-3.html#cb490-2" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Accomodation count&quot;</span>,</span>
<span id="cb490-3"><a href="tmap-version-3.html#cb490-3" tabindex="-1"></a>              <span class="at">breaks=</span>breaks, </span>
<span id="cb490-4"><a href="tmap-version-3.html#cb490-4" tabindex="-1"></a>              <span class="at">palette=</span><span class="st">&quot;PuBu&quot;</span>)<span class="sc">+</span></span>
<span id="cb490-5"><a href="tmap-version-3.html#cb490-5" tabindex="-1"></a>  <span class="fu">tm_scale_bar</span>(<span class="at">position =</span> <span class="fu">c</span>(<span class="st">&quot;left&quot;</span>, <span class="st">&quot;bottom&quot;</span>), <span class="at">text.size =</span> .<span class="dv">75</span>)<span class="sc">+</span></span>
<span id="cb490-6"><a href="tmap-version-3.html#cb490-6" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">legend.position =</span> <span class="fu">c</span>(<span class="st">&quot;right&quot;</span>,<span class="st">&quot;top&quot;</span>), </span>
<span id="cb490-7"><a href="tmap-version-3.html#cb490-7" tabindex="-1"></a>            <span class="at">legend.text.size=</span>.<span class="dv">75</span>, </span>
<span id="cb490-8"><a href="tmap-version-3.html#cb490-8" tabindex="-1"></a>            <span class="at">legend.title.size =</span> <span class="fl">1.1</span>,</span>
<span id="cb490-9"><a href="tmap-version-3.html#cb490-9" tabindex="-1"></a>            <span class="at">frame=</span><span class="cn">FALSE</span>)<span class="sc">+</span></span>
<span id="cb490-10"><a href="tmap-version-3.html#cb490-10" tabindex="-1"></a>  <span class="fu">tm_credits</span>(<span class="st">&quot;(c) OpenStreetMap contrbutors and Air b n b&quot;</span>, <span class="at">position=</span><span class="fu">c</span>(<span class="fl">0.0</span>,<span class="fl">0.0</span>))<span class="sc">+</span></span>
<span id="cb490-11"><a href="tmap-version-3.html#cb490-11" tabindex="-1"></a>  <span class="co">#tm_text(text = &quot;NAME&quot;, size = .5, along.lines =T, remove.overlap=T,  auto.placement=F)+</span></span>
<span id="cb490-12"><a href="tmap-version-3.html#cb490-12" tabindex="-1"></a>  <span class="fu">tm_compass</span>(<span class="at">type =</span> <span class="st">&quot;8star&quot;</span>, <span class="at">position =</span> <span class="fu">c</span>(<span class="fl">0.06</span>, <span class="fl">0.1</span>)) <span class="sc">+</span></span>
<span id="cb490-13"><a href="tmap-version-3.html#cb490-13" tabindex="-1"></a></span>
<span id="cb490-14"><a href="tmap-version-3.html#cb490-14" tabindex="-1"></a>  <span class="co">#bottom left top right</span></span>
<span id="cb490-15"><a href="tmap-version-3.html#cb490-15" tabindex="-1"></a>  <span class="fu">tm_layout</span>(<span class="at">inner.margin=</span><span class="fu">c</span>(<span class="fl">0.02</span>,<span class="fl">0.02</span>,<span class="fl">0.02</span>,<span class="fl">0.2</span>))</span></code></pre></div>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="tmap-version-3.html#cb491-1" tabindex="-1"></a>inset <span class="ot">=</span> <span class="fu">tm_shape</span>(UK_outlinecrop) <span class="sc">+</span> <span class="fu">tm_polygons</span>() <span class="sc">+</span></span>
<span id="cb491-2"><a href="tmap-version-3.html#cb491-2" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Londonbb)<span class="sc">+</span> </span>
<span id="cb491-3"><a href="tmap-version-3.html#cb491-3" tabindex="-1"></a>  <span class="fu">tm_borders</span>(<span class="at">col =</span> <span class="st">&quot;grey40&quot;</span>, <span class="at">lwd =</span> <span class="dv">3</span>)<span class="sc">+</span></span>
<span id="cb491-4"><a href="tmap-version-3.html#cb491-4" tabindex="-1"></a>    <span class="fu">tm_layout</span>(<span class="at">frame=</span><span class="cn">FALSE</span>,</span>
<span id="cb491-5"><a href="tmap-version-3.html#cb491-5" tabindex="-1"></a>            <span class="at">bg.color =</span> <span class="st">&quot;transparent&quot;</span>)<span class="sc">+</span></span>
<span id="cb491-6"><a href="tmap-version-3.html#cb491-6" tabindex="-1"></a>  <span class="fu">tm_shape</span>(Worldcities2) <span class="sc">+</span></span>
<span id="cb491-7"><a href="tmap-version-3.html#cb491-7" tabindex="-1"></a>  <span class="fu">tm_symbols</span>(<span class="at">col =</span> <span class="st">&quot;red&quot;</span>, <span class="at">scale =</span> .<span class="dv">5</span>)<span class="sc">+</span></span>
<span id="cb491-8"><a href="tmap-version-3.html#cb491-8" tabindex="-1"></a>  <span class="fu">tm_text</span>(<span class="st">&quot;CITY_NAME&quot;</span>, <span class="at">xmod=</span><span class="sc">-</span><span class="fl">1.5</span>, <span class="at">ymod=</span><span class="sc">-</span><span class="fl">0.5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="tmap-version-3.html#cb492-1" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb492-2"><a href="tmap-version-3.html#cb492-2" tabindex="-1"></a>main</span>
<span id="cb492-3"><a href="tmap-version-3.html#cb492-3" tabindex="-1"></a><span class="fu">print</span>(inset, <span class="at">vp =</span> <span class="fu">viewport</span>(<span class="fl">0.86</span>, <span class="fl">0.29</span>, <span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">height =</span> <span class="fl">0.55</span>))</span></code></pre></div>
</div>
<div id="export" class="section level3 hasAnchor" number="8.30.3">
<h3><span class="header-section-number">8.30.3</span> Export<a href="tmap-version-3.html#export" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So how do we output our map then…</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="tmap-version-3.html#cb493-1" tabindex="-1"></a><span class="fu">tmap_save</span>(t, <span class="st">&#39;hotelsandairbnbR.png&#39;</span>)</span>
<span id="cb493-2"><a href="tmap-version-3.html#cb493-2" tabindex="-1"></a></span>
<span id="cb493-3"><a href="tmap-version-3.html#cb493-3" tabindex="-1"></a><span class="fu">library</span>(grid)</span>
<span id="cb493-4"><a href="tmap-version-3.html#cb493-4" tabindex="-1"></a><span class="fu">tmap_save</span>(main,<span class="at">insets_tm =</span> inset,<span class="at">insets_vp=</span><span class="fu">viewport</span>(<span class="at">x=</span><span class="fl">0.86</span>, <span class="at">y=</span><span class="fl">0.29</span>, <span class="at">width=</span>.<span class="dv">5</span>, <span class="at">height=</span>.<span class="dv">55</span>), <span class="at">filename=</span><span class="st">&quot;test.pdf&quot;</span>, <span class="at">dpi=</span><span class="dv">600</span>)</span></code></pre></div>
</div>
<div id="basic-interactive-map" class="section level3 hasAnchor" number="8.30.4">
<h3><span class="header-section-number">8.30.4</span> Basic interactive map<a href="tmap-version-3.html#basic-interactive-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>But could we not also make an interactive map like we did in practical 2?</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="tmap-version-3.html#cb494-1" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb494-2"><a href="tmap-version-3.html#cb494-2" tabindex="-1"></a></span>
<span id="cb494-3"><a href="tmap-version-3.html#cb494-3" tabindex="-1"></a><span class="fu">tm_shape</span>(Airbnb) <span class="sc">+</span> </span>
<span id="cb494-4"><a href="tmap-version-3.html#cb494-4" tabindex="-1"></a>  <span class="fu">tm_polygons</span>(<span class="st">&quot;Accomodation count&quot;</span>, <span class="at">breaks=</span>breaks) </span></code></pre></div>
</div>
<div id="advanced-interactive-map" class="section level3 hasAnchor" number="8.30.5">
<h3><span class="header-section-number">8.30.5</span> Advanced interactive map<a href="tmap-version-3.html#advanced-interactive-map" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>But let’s take it a bit further so we can select our layers on an interactive map..</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb495-1"><a href="tmap-version-3.html#cb495-1" tabindex="-1"></a><span class="co"># library for pop up boxes</span></span>
<span id="cb495-2"><a href="tmap-version-3.html#cb495-2" tabindex="-1"></a><span class="fu">library</span>(leafpop)</span>
<span id="cb495-3"><a href="tmap-version-3.html#cb495-3" tabindex="-1"></a><span class="fu">library</span>(leaflet)</span>
<span id="cb495-4"><a href="tmap-version-3.html#cb495-4" tabindex="-1"></a></span>
<span id="cb495-5"><a href="tmap-version-3.html#cb495-5" tabindex="-1"></a><span class="co">#join data</span></span>
<span id="cb495-6"><a href="tmap-version-3.html#cb495-6" tabindex="-1"></a>Joined <span class="ot">&lt;-</span> Airbnb<span class="sc">%&gt;%</span></span>
<span id="cb495-7"><a href="tmap-version-3.html#cb495-7" tabindex="-1"></a>  <span class="fu">st_join</span>(., Hotels, <span class="at">join =</span> st_equals)<span class="sc">%&gt;%</span></span>
<span id="cb495-8"><a href="tmap-version-3.html#cb495-8" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(GSS_CODE.x, NAME.x, <span class="st">`</span><span class="at">Accomodation count.x</span><span class="st">`</span>, <span class="st">`</span><span class="at">Accomodation count.y</span><span class="st">`</span>)<span class="sc">%&gt;%</span></span>
<span id="cb495-9"><a href="tmap-version-3.html#cb495-9" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="st">`</span><span class="at">GSS code</span><span class="st">`</span> <span class="ot">=</span><span class="st">`</span><span class="at">GSS_CODE.x</span><span class="st">`</span>,</span>
<span id="cb495-10"><a href="tmap-version-3.html#cb495-10" tabindex="-1"></a>                <span class="st">`</span><span class="at">Borough</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">NAME.x</span><span class="st">`</span>,</span>
<span id="cb495-11"><a href="tmap-version-3.html#cb495-11" tabindex="-1"></a>                <span class="st">`</span><span class="at">Airbnb count</span><span class="st">`</span> <span class="ot">=</span> <span class="st">`</span><span class="at">Accomodation count.x</span><span class="st">`</span>,</span>
<span id="cb495-12"><a href="tmap-version-3.html#cb495-12" tabindex="-1"></a>                <span class="st">`</span><span class="at">Hotel count</span><span class="st">`</span><span class="ot">=</span> <span class="st">`</span><span class="at">Accomodation count.y</span><span class="st">`</span>)<span class="sc">%&gt;%</span></span>
<span id="cb495-13"><a href="tmap-version-3.html#cb495-13" tabindex="-1"></a>  <span class="fu">st_transform</span>(., <span class="dv">4326</span>)</span>
<span id="cb495-14"><a href="tmap-version-3.html#cb495-14" tabindex="-1"></a>  </span>
<span id="cb495-15"><a href="tmap-version-3.html#cb495-15" tabindex="-1"></a>  </span>
<span id="cb495-16"><a href="tmap-version-3.html#cb495-16" tabindex="-1"></a><span class="co">#remove the geometry for our pop up boxes to avoid</span></span>
<span id="cb495-17"><a href="tmap-version-3.html#cb495-17" tabindex="-1"></a>popupairbnb <span class="ot">&lt;-</span>Joined <span class="sc">%&gt;%</span></span>
<span id="cb495-18"><a href="tmap-version-3.html#cb495-18" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>()<span class="sc">%&gt;%</span></span>
<span id="cb495-19"><a href="tmap-version-3.html#cb495-19" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">`</span><span class="at">Airbnb count</span><span class="st">`</span>, Borough)<span class="sc">%&gt;%</span></span>
<span id="cb495-20"><a href="tmap-version-3.html#cb495-20" tabindex="-1"></a>  <span class="fu">popupTable</span>()</span>
<span id="cb495-21"><a href="tmap-version-3.html#cb495-21" tabindex="-1"></a></span>
<span id="cb495-22"><a href="tmap-version-3.html#cb495-22" tabindex="-1"></a>popuphotel <span class="ot">&lt;-</span>Joined <span class="sc">%&gt;%</span></span>
<span id="cb495-23"><a href="tmap-version-3.html#cb495-23" tabindex="-1"></a>  <span class="fu">st_drop_geometry</span>()<span class="sc">%&gt;%</span></span>
<span id="cb495-24"><a href="tmap-version-3.html#cb495-24" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(<span class="st">`</span><span class="at">Hotel count</span><span class="st">`</span>, Borough)<span class="sc">%&gt;%</span></span>
<span id="cb495-25"><a href="tmap-version-3.html#cb495-25" tabindex="-1"></a>  <span class="fu">popupTable</span>()</span>
<span id="cb495-26"><a href="tmap-version-3.html#cb495-26" tabindex="-1"></a></span>
<span id="cb495-27"><a href="tmap-version-3.html#cb495-27" tabindex="-1"></a><span class="fu">tmap_mode</span>(<span class="st">&quot;view&quot;</span>)</span>
<span id="cb495-28"><a href="tmap-version-3.html#cb495-28" tabindex="-1"></a></span>
<span id="cb495-29"><a href="tmap-version-3.html#cb495-29" tabindex="-1"></a><span class="co"># set the colour palettes using our previously defined breaks</span></span>
<span id="cb495-30"><a href="tmap-version-3.html#cb495-30" tabindex="-1"></a></span>
<span id="cb495-31"><a href="tmap-version-3.html#cb495-31" tabindex="-1"></a></span>
<span id="cb495-32"><a href="tmap-version-3.html#cb495-32" tabindex="-1"></a>pal1 <span class="ot">&lt;-</span> Joined <span class="sc">%&gt;%</span></span>
<span id="cb495-33"><a href="tmap-version-3.html#cb495-33" tabindex="-1"></a>  <span class="fu">colorBin</span>(<span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="at">domain=</span>.<span class="sc">$</span><span class="st">`</span><span class="at">Airbnb count</span><span class="st">`</span>, <span class="at">bins=</span>breaks)</span>
<span id="cb495-34"><a href="tmap-version-3.html#cb495-34" tabindex="-1"></a></span>
<span id="cb495-35"><a href="tmap-version-3.html#cb495-35" tabindex="-1"></a>pal1 <span class="ot">&lt;-</span><span class="fu">colorBin</span>(<span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="at">domain=</span>Joined<span class="sc">$</span><span class="st">`</span><span class="at">Airbnb count</span><span class="st">`</span>, <span class="at">bins=</span>breaks)</span>
<span id="cb495-36"><a href="tmap-version-3.html#cb495-36" tabindex="-1"></a></span>
<span id="cb495-37"><a href="tmap-version-3.html#cb495-37" tabindex="-1"></a>pal2 <span class="ot">&lt;-</span> Joined <span class="sc">%&gt;%</span></span>
<span id="cb495-38"><a href="tmap-version-3.html#cb495-38" tabindex="-1"></a>  <span class="fu">colorBin</span>(<span class="at">palette =</span> <span class="st">&quot;YlOrRd&quot;</span>, <span class="at">domain=</span>.<span class="sc">$</span><span class="st">`</span><span class="at">Hotel count</span><span class="st">`</span>, <span class="at">bins=</span>breaks)</span>
<span id="cb495-39"><a href="tmap-version-3.html#cb495-39" tabindex="-1"></a></span>
<span id="cb495-40"><a href="tmap-version-3.html#cb495-40" tabindex="-1"></a></span>
<span id="cb495-41"><a href="tmap-version-3.html#cb495-41" tabindex="-1"></a>map<span class="ot">&lt;-</span> <span class="fu">leaflet</span>(Joined) <span class="sc">%&gt;%</span></span>
<span id="cb495-42"><a href="tmap-version-3.html#cb495-42" tabindex="-1"></a></span>
<span id="cb495-43"><a href="tmap-version-3.html#cb495-43" tabindex="-1"></a>  <span class="co">#add our polygons, linking to the tables we just made</span></span>
<span id="cb495-44"><a href="tmap-version-3.html#cb495-44" tabindex="-1"></a>  <span class="fu">addPolygons</span>(<span class="at">color=</span><span class="st">&quot;white&quot;</span>, </span>
<span id="cb495-45"><a href="tmap-version-3.html#cb495-45" tabindex="-1"></a>              <span class="at">weight =</span> <span class="dv">2</span>,</span>
<span id="cb495-46"><a href="tmap-version-3.html#cb495-46" tabindex="-1"></a>              <span class="at">opacity =</span> <span class="dv">1</span>,</span>
<span id="cb495-47"><a href="tmap-version-3.html#cb495-47" tabindex="-1"></a>              <span class="at">dashArray =</span> <span class="st">&quot;3&quot;</span>,</span>
<span id="cb495-48"><a href="tmap-version-3.html#cb495-48" tabindex="-1"></a>              <span class="at">popup =</span> popupairbnb,</span>
<span id="cb495-49"><a href="tmap-version-3.html#cb495-49" tabindex="-1"></a>              <span class="at">fillOpacity =</span> <span class="fl">0.7</span>,</span>
<span id="cb495-50"><a href="tmap-version-3.html#cb495-50" tabindex="-1"></a>              <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal2</span>(<span class="st">`</span><span class="at">Airbnb count</span><span class="st">`</span>),</span>
<span id="cb495-51"><a href="tmap-version-3.html#cb495-51" tabindex="-1"></a>              <span class="at">group =</span> <span class="st">&quot;Airbnb&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb495-52"><a href="tmap-version-3.html#cb495-52" tabindex="-1"></a>  </span>
<span id="cb495-53"><a href="tmap-version-3.html#cb495-53" tabindex="-1"></a>  <span class="fu">addPolygons</span>(<span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">pal2</span>(<span class="st">`</span><span class="at">Hotel count</span><span class="st">`</span>), </span>
<span id="cb495-54"><a href="tmap-version-3.html#cb495-54" tabindex="-1"></a>              <span class="at">weight =</span> <span class="dv">2</span>,</span>
<span id="cb495-55"><a href="tmap-version-3.html#cb495-55" tabindex="-1"></a>              <span class="at">opacity =</span> <span class="dv">1</span>,</span>
<span id="cb495-56"><a href="tmap-version-3.html#cb495-56" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;white&quot;</span>,</span>
<span id="cb495-57"><a href="tmap-version-3.html#cb495-57" tabindex="-1"></a>              <span class="at">dashArray =</span> <span class="st">&quot;3&quot;</span>,</span>
<span id="cb495-58"><a href="tmap-version-3.html#cb495-58" tabindex="-1"></a>              <span class="at">popup =</span> popupairbnb,</span>
<span id="cb495-59"><a href="tmap-version-3.html#cb495-59" tabindex="-1"></a>              <span class="at">fillOpacity =</span> <span class="fl">0.7</span>,<span class="at">group =</span> <span class="st">&quot;Hotels&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb495-60"><a href="tmap-version-3.html#cb495-60" tabindex="-1"></a>  </span>
<span id="cb495-61"><a href="tmap-version-3.html#cb495-61" tabindex="-1"></a>  <span class="co">#add basemaps</span></span>
<span id="cb495-62"><a href="tmap-version-3.html#cb495-62" tabindex="-1"></a>  <span class="fu">addTiles</span>(<span class="at">group =</span> <span class="st">&quot;OSM (default)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb495-63"><a href="tmap-version-3.html#cb495-63" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>Stadia.StamenToner, <span class="at">group =</span> <span class="st">&quot;Toner&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb495-64"><a href="tmap-version-3.html#cb495-64" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>Stadia.StamenTonerLite, <span class="at">group =</span> <span class="st">&quot;Toner Lite&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb495-65"><a href="tmap-version-3.html#cb495-65" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>CartoDB.Positron, <span class="at">group =</span> <span class="st">&quot;CartoDB&quot;</span>)<span class="sc">%&gt;%</span></span>
<span id="cb495-66"><a href="tmap-version-3.html#cb495-66" tabindex="-1"></a>  </span>
<span id="cb495-67"><a href="tmap-version-3.html#cb495-67" tabindex="-1"></a>  <span class="co"># add a legend</span></span>
<span id="cb495-68"><a href="tmap-version-3.html#cb495-68" tabindex="-1"></a>  <span class="fu">addLegend</span>(<span class="at">pal =</span> pal2, <span class="at">values =</span> <span class="sc">~</span><span class="st">`</span><span class="at">Hotel count</span><span class="st">`</span>, <span class="at">group =</span> <span class="fu">c</span>(<span class="st">&quot;Airbnb&quot;</span>,<span class="st">&quot;Hotel&quot;</span>), </span>
<span id="cb495-69"><a href="tmap-version-3.html#cb495-69" tabindex="-1"></a>            <span class="at">position =</span><span class="st">&quot;bottomleft&quot;</span>, <span class="at">title =</span> <span class="st">&quot;Accomodation count&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb495-70"><a href="tmap-version-3.html#cb495-70" tabindex="-1"></a>  <span class="co"># specify layers control</span></span>
<span id="cb495-71"><a href="tmap-version-3.html#cb495-71" tabindex="-1"></a>  <span class="fu">addLayersControl</span>(</span>
<span id="cb495-72"><a href="tmap-version-3.html#cb495-72" tabindex="-1"></a>    <span class="at">baseGroups =</span> <span class="fu">c</span>(<span class="st">&quot;OSM (default)&quot;</span>, <span class="st">&quot;Toner&quot;</span>, <span class="st">&quot;Toner Lite&quot;</span>, <span class="st">&quot;CartoDB&quot;</span>),</span>
<span id="cb495-73"><a href="tmap-version-3.html#cb495-73" tabindex="-1"></a>    <span class="at">overlayGroups =</span> <span class="fu">c</span>(<span class="st">&quot;Airbnb&quot;</span>, <span class="st">&quot;Hotels&quot;</span>),</span>
<span id="cb495-74"><a href="tmap-version-3.html#cb495-74" tabindex="-1"></a>    <span class="at">options =</span> <span class="fu">layersControlOptions</span>(<span class="at">collapsed =</span> <span class="cn">FALSE</span>)</span>
<span id="cb495-75"><a href="tmap-version-3.html#cb495-75" tabindex="-1"></a>  )</span>
<span id="cb495-76"><a href="tmap-version-3.html#cb495-76" tabindex="-1"></a></span>
<span id="cb495-77"><a href="tmap-version-3.html#cb495-77" tabindex="-1"></a><span class="co"># plot the map</span></span>
<span id="cb495-78"><a href="tmap-version-3.html#cb495-78" tabindex="-1"></a>map</span></code></pre></div>
<div class="infobox warning">
<p>The legend on this map doesn’t update when you select a different layer. I could have enabled this by chaning the <code>group</code> argument to just Airbnb or Hotel, then calling a second <code>addLegend()</code> function for the other group. However, when displaying maps such as these, it’s often useful to have a consistent scale in the legend so they are <strong>directly</strong> comparable.</p>
</div>
<p>If you want to explore Leaflet more have a look at <a href="https://rstudio.github.io/leaflet/">the leaflet for R Guide</a></p>
<p>To see other basemap options (there are loads!) have a look here at <a href="http://leaflet-extras.github.io/leaflet-providers/preview/">leaflet extras</a></p>
</div>
</div>
<div id="bad-maps-1" class="section level2 hasAnchor" number="8.31">
<h2><span class="header-section-number">8.31</span> Bad maps<a href="tmap-version-3.html#bad-maps-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>What makes a bad map then… and what should you avoid:</p>
<ul>
<li>Poor labeling — don’t present something as an output with the file name (e.g. layer_1_osm) in the legend — name your layers properly, it’s <strong>really easy</strong> to do and makes a <strong>big</strong> difference to the quality of the map.</li>
<li>No legend</li>
<li>Screenshot of the map — export it properly, we’ve been doing this a while and can tell</li>
<li>Change the values in the legend … what is aesthetically more pleasing 31.99999 or 32?. Make it as easy as possible to interpret your map.</li>
<li>Too much data presented on one map — be selective or plot multiple maps</li>
<li>Presented data is too small or too big — be critical about what you produce, it should be easy to read and understand</li>
<li>A map or figure without enough detail — <strong>A reader should be able to understand a map or figure using the graphic in the figure/map and the caption alone!</strong> A long caption is <strong>fine</strong> assuming it’s all relevant information.</li>
</ul>
<p>For more cartography ideas/advice have a look at <a href="https://www.katiejolly.io/blog/2019-08-28/nyt-urban-heat">Katie Jolly’s blog post on urban heat islands</a>, consult <a href="https://www.axismaps.com/guide/">axis map catography guide</a> and check out the <a href="https://www.reddit.com/r/dataisbeautiful/">data is beautiful reddit</a>.</p>
<p>Another decent resource is the <a href="https://serialmentor.com/dataviz/">Fundamentals of Data Visualization book</a></p>
</div>
<div id="feedback-8" class="section level2 hasAnchor" number="8.32">
<h2><span class="header-section-number">8.32</span> Feedback<a href="tmap-version-3.html#feedback-8" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Was anything that we explained unclear this week or was something really clear…let us know using the <a href="https://forms.gle/w2GUDYc7tSavGy7r6">feedback form</a>. It’s anonymous and we’ll use the responses to clear any issues up in the future / adapt the material.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="qgis-maps.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="functions-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
  "sharing": {
    "github": true,
    "facebook": false,
    "twitter": false,
    "linkedin": false,
    "weibo": false,
    "instapaper": false,
    "vk": false,
    "whatsapp": false,
    "all": false
  },
  "fontsettings": {
    "theme": "white",
    "family": "sans",
    "size": 2
  },
  "edit": {
    "link": "https://github.com/andrewmaclachlan/CASA0005repo/edit/master/16-tmapv3.Rmd",
    "text": "Edit"
  },
  "history": {
    "link": null,
    "text": null
  },
  "view": {
    "link": null,
    "text": null
  },
  "download": ["https://github.com/andrewmaclachlan/CASA0005repo/raw/master/16-tmapv3.Rmd"],
  "search": {
    "engine": "fuse",
    "options": {
      "includeScore": true
    }
  },
  "toc": {
    "collapse": "section",
    "scroll_highlight": true
  }
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
